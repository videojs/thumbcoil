/**
 * thumbcoil
 * @version 1.2.1
 * @copyright 2017 Brightcove, Inc.
 * @license Apache-2.0
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.thumbcoil=e()}}(function(){return function e(t,a,n){function r(s,o){if(!a[s]){if(!t[s]){var u="function"==typeof require&&require;if(!o&&u)return u(s,!0);if(i)return i(s,!0);var _=new Error("Cannot find module '"+s+"'");throw _.code="MODULE_NOT_FOUND",_}var l=a[s]={exports:{}};t[s][0].call(l.exports,function(e){var a=t[s][1][e];return r(a?a:e)},l,l.exports,e,t,a,n)}return a[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e,t){for(var a=t.bitReservoir,n=0;n<e.length;n++){var r=e[n],i=a.slice(0,r.size),s=r[i];if("number"==typeof s)return t.readBits(r.size),s}return-999999};a.readCodebookValue=n;var r=[{0:60,size:1},{100:59,size:3},{1010:61,1011:58,1100:62,size:4},{11010:57,11011:63,size:5},{111000:56,111001:64,111010:55,111011:65,size:6},{1111000:66,1111001:54,1111010:67,size:7},{11110110:53,11110111:68,11111000:52,11111001:69,11111010:51,size:8},{111110110:70,111110111:50,111111000:49,111111001:71,size:9},{1111110100:72,1111110101:48,1111110110:73,1111110111:47,1111111000:74,1111111001:46,size:10},{size:11,11111110101:75,11111110100:76,11111111001:43,11111111000:45,11111110110:77,11111110111:78},{size:12,111111110100:44,111111110111:41,111111110110:42,111111111001:40,111111110101:79,111111111000:80},{size:13,1111111110100:81,1111111110110:82,1111111110111:38,1111111110101:39,1111111111000:83},{size:14,11111111110010:37,11111111110111:34,11111111110110:36,11111111110101:33,11111111111001:32,11111111111000:84,11111111110100:85,11111111110011:35},{size:15,111111111110110:30,111111111110100:87,111111111110111:31,111111111110101:89},{size:16,1111111111110011:27,1111111111110100:28,1111111111110001:29,1111111111110010:26,1111111111110101:24,1111111111110110:88,1111111111110000:86},{size:17,11111111111110000:23,11111111111101110:25,"11111111111101111":22},{size:18,"111111111111100111":2,111111111111100100:19,"111111111111100101":3,"111111111111100011":21,"111111111111100010":90,111111111111101000:0,111111111111100110:1},{size:19,"1111111111111010010":98,"1111111111111111010":20,"1111111111111111011":17,1111111111111111000:16,"1111111111111110111":15,"1111111111111111110":14,"1111111111111111111":13,"1111111111111111101":12,"1111111111111111100":11,1111111111111110000:10,"1111111111111101111":9,"1111111111111101110":8,"1111111111111110110":7,"1111111111111101101":6,"1111111111111110001":5,"1111111111111110101":4,"1111111111111011001":91,"1111111111111011010":92,"1111111111111011011":93,1111111111111011100:94,"1111111111111011101":95,"1111111111111011110":96,1111111111111011000:97,"1111111111111111001":18,"1111111111111010011":99,"1111111111111010100":100,"1111111111111010101":101,"1111111111111010110":102,"1111111111111110010":103,"1111111111111011111":104,"1111111111111100111":105,1111111111111101000:106,"1111111111111101001":107,"1111111111111101010":108,"1111111111111101011":109,"1111111111111100110":110,1111111111111100000:111,"1111111111111100001":112,"1111111111111100010":113,"1111111111111100011":114,"1111111111111100100":115,"1111111111111100101":116,"1111111111111010111":117,"1111111111111101100":118,1111111111111110100:119,"1111111111111110011":120}];a.scaleFactorCB=r;var i=[[],[{0:40,size:1},{10000:67,10001:13,10010:39,10011:49,10100:41,10101:37,10110:43,10111:31,size:5},{1100000:58,1100001:22,1100010:38,1100011:46,1100100:34,1100101:42,1100110:76,1100111:36,1101000:4,1101001:28,1101010:64,1101011:48,1101100:16,1101101:44,1101110:70,1101111:32,1110000:52,1110001:50,1110010:10,1110011:68,1110100:12,1110101:66,1110110:14,1110111:30,size:7},{111100000:73,111100001:19,111100010:61,111100011:51,111100100:47,111100101:35,111100110:33,111100111:55,111101000:65,111101001:45,111101010:25,111101011:15,111101100:7,111101101:29,111101110:59,111101111:57,111110000:21,111110001:1,111110010:27,111110011:53,111110100:69,111110101:77,111110110:23,111110111:79,size:9},{1111110000:5,1111110001:9,1111110010:75,1111110011:63,1111110100:11,1111110101:3,1111110110:17,1111110111:71,size:10},{size:11,11111111101:2,11111111110:54,11111110101:8,11111110011:56,11111111000:0,11111110010:24,11111111100:18,11111110110:72,11111110000:60,11111111001:74,11111111011:26,11111111010:62,11111110111:6,11111111111:78,11111110001:20,11111110100:80}],[{size:3,"000":40},{size:4,"0010":67},{size:5,"00110":13,"01010":31,"01000":37,"01001":39,"00111":41,"01011":43,"01100":49},{100000:12,100001:58,100010:64,100011:4,100100:36,100101:70,100110:68,100111:32,101000:16,101001:50,101010:28,101011:14,101100:30,101101:10,101110:76,101111:52,110000:44,110001:66,size:6,"011011":22,"011010":34,"011111":38,"011101":42,"011100":46,"011110":48},{1100100:47,1100101:65,1100110:19,1100111:33,1101000:61,1101001:75,1101010:71,1101011:25,1101100:29,1101101:79,1101110:15,1101111:1,1110000:11,1110001:55,1110010:73,size:7},{11100110:59,11100111:21,11101000:7,11101001:17,11101010:5,11101011:3,11101100:27,11101101:69,11101110:63,11101111:45,11110000:53,11110001:23,11110010:9,11110011:51,11110100:57,11110101:35,11110110:77,11110111:60,11111000:20,size:8},{111110010:56,111110011:0,111110100:24,111110101:26,111110110:80,111110111:6,111111000:62,111111001:18,111111010:8,111111011:72,111111100:54,111111101:2,111111110:74,111111111:78,size:9}],[{0:0,size:1},{1000:27,1001:1,1010:9,1011:3,size:4},{11000:36,11001:4,size:5},{110100:12,110101:10,110110:30,110111:13,111000:28,111001:39,size:6},{1110100:40,1110101:31,1110110:37,size:7},{11101110:54,11101111:2,11110000:5,11110001:63,11110010:48,size:8},{111100110:7,111100111:16,111101000:45,111101001:14,111101010:66,111101011:6,111101100:21,111101101:15,111101110:18,111101111:11,111110000:57,111110001:49,111110010:22,111110011:42,111110100:43,size:9},{1111101010:46,1111101011:33,1111101100:34,1111101101:19,1111101110:67,1111101111:41,1111110000:64,1111110001:32,1111110010:8,1111110011:17,1111110100:75,1111110101:51,1111110110:29,1111110111:55,1111111000:25,size:10},{size:11,11111111001:23,11111111000:24,11111110111:76,11111110011:52,11111110010:72,11111110100:38,11111110110:44,11111110101:58},{size:12,111111111100:53,111111110100:35,111111110101:73,111111111011:50,111111111010:70,111111110111:78,111111110110:69,111111111001:79,111111111000:26},{size:13,1111111111010:20,1111111111100:47,1111111111011:60},{size:14,11111111111011:68,11111111111010:61,11111111111100:65},{size:15,111111111111010:80,111111111111100:71,111111111111101:59,111111111111011:77,111111111111110:56},{size:16,1111111111111111:62,1111111111111110:74}],[{1000:4,1001:30,size:4,"0000":40,"0111":0,"0011":39,"0010":37,"0110":36,"0100":31,"0101":27,"0001":13},{10100:28,10101:12,10110:1,10111:10,11000:3,11001:9,size:5},{1101000:67,1101001:43,1101010:49,1101011:41,1101100:66,1101101:64,1101110:48,1101111:58,1110000:16,size:7},{11100010:14,11100011:42,11100100:22,11100101:32,11100110:46,11100111:38,11101000:34,11101001:63,11101010:57,11101011:45,11101100:55,11101101:11,11101110:21,11101111:5,11110000:15,11110001:19,11110010:29,11110011:7,11110100:33,11110101:54,11110110:2,size:8},{111101110:18,111101111:6,111110000:52,111110001:76,111110010:70,111110011:44,111110100:50,111110101:68,size:9},{1111101100:51,1111101101:75,1111101110:69,1111101111:25,1111110000:17,1111110001:73,1111110010:23,1111110011:61,1111110100:35,1111110101:79,1111110110:47,1111110111:59,1111111000:65,1111111001:53,size:10},{size:11,11111111010:20,11111111100:80,11111111001:60,11111110100:71,11111110111:72,11111110110:24,11111111000:8,11111111011:56,11111111101:26,11111110101:77,11111111110:78},{size:12,111111111111:62,111111111110:74}],[{0:40,size:1},{1000:31,1001:49,1010:41,1011:39,size:4},{11000:48,11001:32,11010:30,11011:50,size:5},{1110000:22,1110001:42,1110010:58,1110011:38,size:7},{11101000:21,11101001:59,11101010:29,11101011:51,11101100:23,11101101:57,11101110:33,11101111:47,11110000:13,11110001:67,11110010:37,11110011:43,size:8},{111101000:12,111101001:52,111101010:68,111101011:28,111101100:14,111101101:66,111101110:46,111101111:34,111110000:24,111110001:60,111110010:20,111110011:56,size:9},{1111101000:11,1111101001:65,1111101010:25,1111101011:55,1111101100:69,1111101101:61,1111101110:15,1111101111:19,1111110000:36,1111110001:4,1111110010:77,1111110011:76,size:10},{size:11,11111101011:27,11111101001:44,11111101111:45,11111101101:35,11111110001:10,11111110101:78,11111110111:62,11111110000:64,11111110010:16,11111101110:5,11111101000:3,11111111001:6,11111101100:53,11111111000:70,11111101010:75,11111110110:54,11111110011:26,11111110100:2},{size:12,111111110110:63,111111110100:18,111111111001:71,111111111100:73,111111110101:74,111111111000:7,111111111101:9,111111111011:79,111111111010:17,111111110111:1},{size:13,1111111111111:0,1111111111100:72,1111111111101:8,1111111111110:80}],[{1000:30,size:4,"0011":41,"0000":40,"0101":50,"0001":49,"0111":48,"0010":39,"0110":32,"0100":31},{100100:57,100101:59,100110:23,100111:21,101000:22,101001:33,101010:58,101011:47,101100:51,101101:38,101110:29,101111:42,110000:56,110001:24,110010:20,110011:60,size:6},{1101000:14,1101001:68,1101010:66,1101011:34,1101100:12,1101101:52,1101110:46,1101111:28,1110000:67,1110001:13,1110010:37,1110011:43,1110100:69,size:7},{11101010:11,11101011:25,11101100:61,11101101:65,11101110:55,11101111:19,11110000:15,11110001:70,size:8},{111100100:64,111100101:10,111100110:16,111100111:45,111101000:27,111101001:77,111101010:5,111101011:3,111101100:53,111101101:75,111101110:35,111101111:36,111110000:6,111110001:2,111110010:62,111110011:18,111110100:4,111110101:78,111110110:74,111110111:26,111111000:76,111111001:54,111111010:44,size:9},{1111110110:9,1111110111:17,1111111000:63,1111111001:73,1111111010:71,1111111011:79,1111111100:7,1111111101:1,size:10},{size:11,11111111110:0,11111111111:72,11111111101:8,11111111100:80}],[{0:0,size:1},{100:8,101:1,size:3},{1100:9,size:4},{110100:17,110101:10,110110:16,110111:2,size:6},{1110000:25,1110001:11,1110010:18,1110011:24,1110100:3,size:7},{11101010:19,11101011:26,11101100:12,11101101:33,11101110:13,11101111:41,11110000:27,11110001:20,11110010:4,11110011:32,size:8},{111101000:34,111101001:21,111101010:42,111101011:5,111101100:49,111101101:40,111101110:14,111101111:35,111110000:29,111110001:28,111110010:43,111110011:22,111110100:50,111110101:15,size:9},{1111101100:30,1111101101:6,1111101110:48,1111101111:36,1111110000:57,1111110001:37,1111110010:58,1111110011:44,1111110100:51,1111110101:23,1111110110:59,1111110111:52,1111111000:45,1111111001:38,1111111010:31,size:10},{size:11,11111111011:39,11111111100:47,11111111101:61,11111111010:60,11111110110:56,11111111001:46,11111111000:53,11111110111:7},{size:12,111111111110:55,111111111101:54,111111111100:62,111111111111:63}],[{size:3,"000":9},{size:4,"0101":1,"0011":8,"0100":10,"0010":17,"0110":18},{10000:2,10001:25,10010:11,10011:26,10100:19,size:5,"01111":16,"01110":0},{101010:27,101011:33,101100:12,101101:34,101110:20,101111:24,110000:3,110001:35,110010:28,110011:42,size:6},{1101000:41,1101001:21,1101010:13,1101011:43,1101100:29,1101101:36,1101110:44,1101111:4,1110000:37,1110001:32,1110010:22,1110011:50,1110100:49,1110101:14,size:7},{11101100:30,11101101:51,11101110:45,11101111:40,11110000:52,11110001:5,11110010:38,11110011:57,11110100:58,11110101:23,11110110:53,11110111:59,11111000:15,11111001:46,11111010:31,size:8},{111110110:54,111110111:60,111111000:48,111111001:39,111111010:6,111111011:61,111111100:62,111111101:55,size:9},{1111111100:47,1111111101:56,1111111110:7,1111111111:63,size:10}],[{0:0,size:1},{100:13,101:1,size:3},{1100:14,size:4},{110100:27,110101:15,110110:26,110111:2,size:6},{1110000:40,1110001:28,1110010:16,size:7},{11100110:39,11100111:3,11101000:29,11101001:41,11101010:17,11101011:53,11101100:30,11101101:18,size:8},{111011100:54,111011101:42,111011110:4,111011111:52,111100000:66,111100001:31,111100010:19,111100011:43,111100100:67,111100101:79,111100110:55,size:9},{1111001110:5,1111001111:32,1111010000:65,1111010001:20,1111010010:44,1111010011:21,1111010100:105,1111010101:56,1111010110:68,1111010111:80,1111011000:92,1111011001:6,1111011010:106,1111011011:34,1111011100:45,1111011101:33,1111011110:57,1111011111:118,1111100000:22,1111100001:93,size:10},{size:11,11111001100:46,11111011100:60,11111000101:69,11111010001:70,11111011011:71,11111100000:73,11111000100:78,11111001011:58,11111011110:48,11111000110:81,11111001111:82,11111011010:83,11111001010:47,11111011111:144,11111010011:91,11111011101:59,11111001000:7,11111010100:94,11111011001:95,11111010101:132,11111001110:131,11111010010:104,11111001101:8,11111010000:35,11111000111:107,11111010111:108,11111100010:109,11111010110:120,11111001001:119,11111100001:117,11111011000:23},{size:12,111111000111:36,111111010100:37,111111001101:61,111111100010:62,111111011010:85,111111100011:86,111111101001:87,111111100111:63,111111101000:143,111111100001:135,111111011100:147,111111100100:38,111111011000:49,111111101010:50,111111001100:157,111111010011:96,111111011110:97,111111010001:134,111111000110:133,111111010110:158,111111001011:84,111111100000:130,111111100110:124,111111001111:24,111111010010:72,111111010101:25,111111011001:74,111111101011:75,111111010111:146,111111001110:110,111111011011:111,111111100101:123,111111010000:122,111111001010:121,111111001001:145,111111001000:9,111111011101:10,111111011111:159},{size:13,1111111110100:115,1111111100110:88,1111111011000:112,1111111110110:103,1111111101011:125,1111111101111:126,1111111110001:102,1111111101010:101,1111111100010:100,1111111011001:99,1111111011101:98,1111111110111:90,1111111100000:136,1111111101000:137,1111111110000:138,1111111110011:89,1111111101110:113,1111111101001:77,1111111100011:76,1111111100001:64,1111111011100:148,1111111011111:149,1111111101101:150,1111111110101:151,1111111100111:156,1111111011011:51,1111111101100:12,1111111100100:11,1111111011110:160,1111111011010:161,1111111100101:162,1111111110010:163},{size:14,11111111111101:167,11111111111001:152,11111111111011:153,11111111111100:166,11111111110111:165,11111111110101:129,11111111110000:114,11111111110010:116,11111111110011:127,11111111110100:128,11111111110001:139,11111111111000:140,11111111110110:141,11111111111010:164},{size:15,111111111111110:155,111111111111101:154,111111111111100:142,111111111111111:168}],[{size:4,"0010":27,"0000":14,"0001":15},{size:5,"01101":42,"01001":16,"01000":1,"00111":13,"00110":28,"01100":29,"01011":40,"01010":41},{100000:17,100001:53,100010:0,100011:55,100100:43,100101:39,100110:3,100111:56,101000:31,101001:67,size:6,"011110":30,"011101":2,"011100":26,"011111":54},{1010100:18,1010101:66,1010110:68,1010111:44,1011000:69,1011001:57,1011010:80,1011011:32,1011100:81,1011101:52,1011110:79,1011111:4,1100000:19,1100001:45,1100010:70,1100011:82,1100100:58,size:7},{11001010:83,11001011:93,11001100:46,11001101:33,11001110:71,11001111:106,11010000:94,11010001:65,11010010:92,11010011:5,11010100:105,11010101:20,11010110:107,11010111:95,11011000:59,11011001:34,11011010:84,11011011:96,11011100:21,11011101:47,11011110:108,11011111:60,11100000:72,11100001:109,11100010:73,size:8},{111000110:97,111000111:85,111001000:119,111001001:78,111001010:86,111001011:120,111001100:48,111001101:118,111001110:35,111001111:6,111010000:110,111010001:121,111010010:61,111010011:132,111010100:22,111010101:98,111010110:111,111010111:122,111011000:99,111011001:133,111011010:74,111011011:134,111011100:36,111011101:131,111011110:49,111011111:123,111100000:87,111100001:104,111100010:62,111100011:91,111100100:145,size:9},{1111001010:100,1111001011:146,1111001100:136,1111001101:23,1111001110:144,1111001111:124,1111010000:7,1111010001:112,1111010010:135,1111010011:50,1111010100:75,1111010101:113,1111010110:148,1111010111:8,1111011000:147,1111011001:37,1111011010:101,1111011011:88,1111011100:137,1111011101:63,1111011110:24,1111011111:158,1111100000:125,1111100001:159,1111100010:149,1111100011:76,1111100100:160,1111100101:150,1111100110:161,1111100111:51,1111101000:89,1111101001:117,1111101010:138,1111101011:130,1111101100:157,1111101101:9,1111101110:64,1111101111:126,1111110000:162,1111110001:38,1111110010:114,size:10},{size:11,11111110111:154,11111101101:139,11111111001:141,11111101111:164,11111110010:143,11111101001:163,11111111000:128,11111100110:127,11111111011:116,11111101110:115,11111110000:10,11111110001:103,11111101000:151,11111110100:152,11111110101:153,11111110011:140,11111101011:77,11111111010:156,11111101010:102,11111110110:11,11111100111:25,11111101100:90},{size:12,111111111101:12,111111111011:155,111111111010:129,111111111001:142,111111111000:165,111111111110:166,111111111100:167,111111111111:168}],[{size:4,"0000":0,"0001":18},{size:5,"00110":1,"01001":36,"00111":35,"01000":19,"00100":288,"00101":17},{size:6,"011010":54,"011001":2,"010100":20,"010110":53,"010111":34,"010101":52,"011000":37},{1000000:39,1000001:72,1000010:22,1000011:88,1000100:56,1000101:89,size:7,"0110110":69,"0111001":38,"0111100":51,"0111101":3,"0110111":21,"0111011":55,"0111000":70,"0111010":71,"0111110":86,"0111111":87},{10001100:73,10001101:104,10001110:40,10001111:103,10010000:105,10010001:57,10010010:23,10010011:84,10010100:67,10010101:277,10010110:275,10010111:276,10011000:106,10011001:278,10011010:68,10011011:74,10011100:4,10011101:50,10011110:90,10011111:101,10100000:279,10100001:274,10100010:280,10100011:41,10100100:121,10100101:58,10100110:107,10100111:91,10101000:118,10101001:282,10101010:122,10101011:120,10101100:281,10101101:135,10101110:33,10101111:24,10110000:75,10110001:283,10110010:123,10110011:284,10110100:152,10110101:273,10110110:108,10110111:169,10111000:42,10111001:92,10111010:186,10111011:285,10111100:139,10111101:138,10111110:59,10111111:85,11000000:286,11000001:203,11000010:124,11000011:76,11000100:109,11000101:125,11000110:5,size:8},{110001110:140,110001111:287,110010000:220,110010001:25,110010010:137,110010011:254,110010100:93,110010101:237,110010110:60,110010111:141,110011000:126,110011001:43,110011010:142,110011011:155,110011100:156,110011101:271,110011110:77,110011111:110,110100000:102,110100001:157,110100010:94,110100011:143,110100100:127,110100101:26,110100110:173,110100111:6,110101000:172,110101001:154,110101010:158,110101011:78,110101100:44,110101101:159,110101110:61,110101111:111,110110000:174,110110001:144,110110010:175,110110011:160,110110100:190,110110101:27,110110110:119,110110111:176,110111000:128,110111001:62,110111010:95,110111011:171,110111100:79,110111101:189,110111110:223,110111111:112,111000000:224,111000001:45,111000010:272,111000011:96,111000100:192,size:9},{1110001010:191,1110001011:161,1110001100:129,1110001101:145,1110001110:16,1110001111:81,1110010000:7,1110010001:64,1110010010:193,1110010011:222,1110010100:225,1110010101:207,1110010110:47,1110010111:226,1110011000:146,1110011001:113,1110011010:178,1110011011:177,1110011100:240,1110011101:208,1110011110:28,1110011111:80,1110100000:188,1110100001:63,1110100010:30,1110100011:206,1110100100:130,1110100101:65,1110100110:97,1110100111:98,1110101000:242,1110101001:82,1110101010:194,1110101011:241,1110101100:209,1110101101:227,1110101110:210,1110101111:136,1110110000:195,1110110001:46,1110110010:162,1110110011:243,1110110100:115,1110110101:180,1110110110:257,1110110111:147,1110111000:163,1110111001:244,1110111010:179,1110111011:99,1110111100:196,1110111101:239,1110111110:48,1110111111:114,1111000000:29,1111000001:229,1111000010:8,1111000011:228,1111000100:131,1111000101:211,1111000110:132,1111000111:258,1111001000:205,1111001001:116,1111001010:49,1111001011:260,1111001100:259,1111001101:31,1111001110:164,1111001111:83,1111010000:245,1111010001:149,1111010010:230,1111010011:148,1111010100:100,1111010101:66,1111010110:181,1111010111:197,1111011000:212,1111011001:261,1111011010:262,1111011011:150,1111011100:256,1111011101:133,1111011110:153,1111011111:9,1111100000:166,1111100001:165,1111100010:213,1111100011:246,1111100100:183,1111100101:247,1111100110:214,1111100111:117,1111101000:134,size:10},{size:11,11111111000:238,11111110100:235,11111101011:234,11111011111:233,11111011001:232,11111011010:231,11111110010:221,11111110111:219,11111100010:248,11111011110:249,11111101101:250,11111110001:251,11111111001:252,11111111100:253,11111101001:218,11111100110:10,11111100000:217,11111100111:216,11111100100:215,11111111011:204,11111110000:202,11111010101:201,11111011011:200,11111010011:263,11111111010:236,11111101110:265,11111101111:266,11111110101:267,11111110110:268,11111110011:11,11111101100:13,11111011100:199,11111010100:198,11111101000:187,11111101010:185,11111011000:184,11111010111:182,11111100011:170,11111100101:168,11111010010:167,11111011101:151,11111010110:32,11111100001:264},{size:12,111111111110:15,111111111010:14,111111111111:270,111111111011:12,111111111100:269,111111111101:255}]];a.spectrumCB=i},{}],2:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=(e("../../lib/exp-golomb-string"),e("../../lib/combinators")),i=e("../../lib/conditionals"),s=e("../../lib/data-types"),o=(e("../../lib/rbsp-utils"),e("./scale-factor-bands")),u=e("./codebooks"),_=0,l=1,c=2,d=3,f=4,p=2,m=0,g=5,h=11,b=16,y=[[null,null,0],[0,4,1],[0,4,1],[1,4,2],[1,4,2],[0,2,4],[0,2,4],[1,2,7],[1,2,7],[1,2,12],[1,2,12],[1,2,16]],v=[33,33,38,40,40,40,41,41,37,37,37,34],w=function(e,t){return 1<<t&e},x={decode:function(e,t,a,n){var r=a.sampling_frequency_index;if(t.window_sequence===c){t.num_windows=8,t.num_window_groups=1,t.window_group_length=[1],t.num_swb=o.swb_offset_long_window[r].length-1,t.sect_sfb_offset=[],t.swb_offset=[];for(var i=0;i<=t.num_swb;i++)t.swb_offset[i]=o.swb_offset_short_window[r][i];for(var i=0;i<t.num_windows-1;i++)0===w(t.scale_factor_grouping,6-i)?(t.num_window_groups+=1,t.window_group_length[t.num_window_groups-1]=1):t.window_group_length[t.num_window_groups-1]+=1;for(var s=0;s<t.num_window_groups;s++){var u=0,_=0;t.sect_sfb_offset[s]=[];for(var i=0;i<t.max_sfb;i++){var l=o.swb_offset_short_window[r][i+1]-o.swb_offset_short_window[r][i];l*=t.window_group_length[s],t.sect_sfb_offset[s][u++]=_,_+=l}t.sect_sfb_offset[s][u]=_}}else{t.num_windows=1,t.num_window_groups=1,t.window_group_length=[1],t.num_swb=o.swb_offset_long_window[r].length-1,t.sect_sfb_offset=[[]],t.swb_offset=[];for(var i=0;i<=t.max_sfb;i++)t.sect_sfb_offset[0][i]=o.swb_offset_long_window[r][i],t.swb_offset[i]=o.swb_offset_long_window[r][i]}return t},encode:function(e,t,a,n){}},z={decode:function(e,t,a,n){var r=5;t.window_sequence===c&&(r=3);var i=(1<<r)-1;t.sect_cb=[],t.sect_start=[],t.sect_end=[],t.sfb_cb=[],t.num_sec=[];for(var s=0;s<t.num_window_groups;s++){var o=0,u=0;for(t.sect_cb[s]=[],t.sect_start[s]=[],t.sect_end[s]=[],t.sfb_cb[s]=[];o<t.max_sfb;){t.sect_cb[s][u]=e.readBits(4);var _=0,l=0;do l=e.readBits(r),_+=l;while(l===i);t.sect_start[s][u]=o,t.sect_end[s][u]=o+_;for(var d=o;d<o+_;d++)t.sfb_cb[s][d]=t.sect_cb[s][u];o+=_,u++}t.num_sec[s]=u}return t},encode:function(e,t,a,n){}},q={decode:function(e,t,a,n){t.scale_factors=[];for(var r=0;r<t.num_window_groups;r++)for(var i=0;i<t.max_sfb;i++)t.sfb_cb[r][i]!==m&&t.scale_factors.push((0,u.readCodebookValue)(u.scaleFactorCB,e));return t},encode:function(e,t,a,n){}},U={decode:function(e,t,a,n){t.n_filt=[],t.coef_res=[],t.length=[],t.order=[],t.direction=[],t.coef_compress=[],t.coef=[];for(var r=0;r<t.num_windows;r++){t.n_filt[r]=e.readBits(2),t.length[r]=[],t.order[r]=[],t.direction[r]=[],t.coef_compress[r]=[],t.coef[r]=[],t.n_filt[r]&&(t.coef_res[r]=e.readBits(1));for(var i=0;i<t.n_filt[r];i++)if(t.length[r][i]=e.readBits(6),t.order[r][i]=e.readBits(5),t.order[r][i]){t.direction[r][i]=e.readBits(1),t.coef_compress[r][i]=e.readBits(1),t.coef[r][i]=[];for(var s=0;s<t.order[r][i];s++)t.coef[r][i][s]=e.readBits(t.coef_res[r]+3)}}return t},encode:function(e,t,a,n){}},A={decode:function(e,t,a,n){if(t.max_band=e.readBits(2),t.adjust_num=[],t.alevcode=[],t.aloccode=[],t.window_sequence===_)for(var r=1;r<=t.max_band;r++){t.adjust_num[r]=[],t.alevcode[r]=[],t.aloccode[r]=[];for(var i=0;i<1;i++){t.adjust_num[r][i]=e.readBits(3),t.alevcode[r][i]=[],t.aloccode[r][i]=[];for(var s=0;s<t.adjust_num[r][i];s++)t.alevcode[r][i][s]=e.readBits(4),t.aloccode[r][i][s]=e.readBits(5)}}else if(t.window_sequence===l)for(var r=1;r<=t.max_band;r++){t.adjust_num[r]=[],t.alevcode[r]=[],t.aloccode[r]=[];for(var i=0;i<2;i++){t.adjust_num[r][i]=e.readBits(3),t.alevcode[r][i]=[],t.aloccode[r][i]=[];for(var s=0;s<t.adjust_num[r][i];s++)t.alevcode[r][i][s]=e.readBits(4),0===i?t.aloccode[r][i][s]=e.readBits(4):t.aloccode[r][i][s]=e.readBits(2)}}else if(t.window_sequence===c)for(var r=1;r<=t.max_band;r++){t.adjust_num[r]=[],t.alevcode[r]=[],t.aloccode[r]=[];for(var i=0;i<8;i++){t.adjust_num[r][i]=e.readBits(3),t.alevcode[r][i]=[],t.aloccode[r][i]=[];for(var s=0;s<t.adjust_num[r][i];s++)t.alevcode[r][i][s]=e.readBits(4),t.aloccode[r][i][s]=e.readBits(2)}}else if(t.window_sequence===d)for(var r=1;r<=t.max_band;r++){t.adjust_num[r]=[],t.alevcode[r]=[],t.aloccode[r]=[];for(var i=0;i<2;i++){t.adjust_num[r][i]=e.readBits(3),t.alevcode[r][i]=[],t.aloccode[r][i]=[];for(var s=0;s<t.adjust_num[r][i];s++)t.alevcode[r][i][s]=e.readBits(4),0===i?t.aloccode[r][i][s]=e.readBits(4):t.aloccode[r][i][s]=e.readBits(5)}}},encode:function(e,t,a,n){}},C=function(e,t){var a=n(y[t],3),r=a[0],i=a[1],s=a[2],o=void 0,u=void 0,_=void 0,l=[];return r?(o=s+1,u=0):(o=2*s+1,u=s),4===i?(l.push(_=parseInt(e/(o*o*o))-u),e-=(_+u)*(o*o*o),l.push(_=parseInt(e/(o*o))-u),e-=(_+u)*(o*o),l.push(_=parseInt(e/o)-u),e-=(_+u)*o,l.push(e-u)):(l.push(_=parseInt(e/o)-u),e-=(_+u)*o,l.push(e-u)),l},k=function(e,t){var a=n(y[t],1),r=a[0];return r?e.filter(function(e){return 0!==e}).length:0},E=function(e){var t=e.bitReservoir,a=0;for(a=0;a<t.length;a++)if("0"===t[a]){var n=(e.readBits(a+1),e.readBits(a+4));return Math.pow(2,a+4)+n}},O={decode:function(e,t,a,n){t.spectral_data=[];for(var r=0;r<t.num_window_groups;r++){t.spectral_data[r]=[];for(var i=0;i<t.num_sec[r];i++){var s=t.sect_cb[r][i],o=t.sect_sfb_offset[r][t.sect_start[r][i]],_=t.sect_sfb_offset[r][t.sect_end[r][i]];if(s!==m&&s<=h)for(var l=o;l<_;){var c=(0,u.readCodebookValue)(u.spectrumCB[s],e),d=C(c,s),y=k(d,s);e.readRawBits(y);t.spectral_data[r][l]=d[0],t.spectral_data[r][l+1]=d[1],s<g?(t.spectral_data[r][l+2]=d[2],t.spectral_data[r][l+3]=d[3],l+=f):(s===h&&(d[0]===b&&(t.spectral_data[r][l]=E(e)),d[1]===b&&(t.spectral_data[r][l+1]=E(e))),l+=p)}}}return t},encode:function(e,t,a,n){}},T={decode:function(e,t,a,n){t.ms_used=[];for(var r=0;r<t.num_window_groups;r++){t.ms_used[r]=[];for(var i=0;i<t.max_sfb;i++)t.ms_used[r][i]=e.readBits(1)}return t},encode:function(e,t,a,n){}},S=(0,r.list)([(0,r.data)("ics_reserved_bit",(0,s.u)(1)),(0,r.data)("window_sequence",(0,s.u)(2)),(0,r.data)("window_shape",(0,s.u)(1)),(0,i.when)((0,i.equals)("window_sequence",c),(0,r.list)([(0,r.data)("max_sfb",(0,s.u)(4)),(0,r.data)("scale_factor_grouping",(0,s.u)(7))])),(0,i.when)((0,i.not)((0,i.equals)("window_sequence",c)),(0,r.list)([(0,r.data)("max_sfb",(0,s.u)(6)),(0,r.data)("predictor_data_present",(0,s.u)(1)),(0,i.when)((0,i.equals)("predictor_data_present",1),(0,r.list)([(0,r.data)("predictor_reset",(0,s.u)(1)),(0,i.when)((0,i.equals)("predictor_reset",1),(0,r.data)("predictor_reset_group_number",(0,s.u)(5))),(0,i.each)(function(e,t){return e<Math.min(t.max_sfb,v[t.sampling_frequency_index])},(0,r.data)("prediction_used[]",(0,s.u)(1)))]))])),x]),P=(0,r.list)([(0,r.data)("number_pulse",(0,s.u)(2)),(0,r.data)("pulse_start_sfb",(0,s.u)(6)),(0,i.each)(function(e,t){return e<=t.number_pulse},(0,r.list)([(0,r.data)("pulse_offset[]",(0,s.u)(5)),(0,r.data)("pulse_amp[]",(0,s.u)(4))]))]),B=(0,r.list)([(0,r.data)("global_gain",(0,s.u)(8)),(0,i.when)((0,i.not)((0,i.equals)("common_window",1)),S),z,q,(0,r.data)("pulse_data_present",(0,s.u)(1)),(0,i.when)((0,i.equals)("pulse_data_present",1),P),(0,r.data)("tns_data_present",(0,s.u)(1)),(0,i.when)((0,i.equals)("tns_data_present",1),U),(0,r.data)("gain_control_data_present",(0,s.u)(1)),(0,i.when)((0,i.equals)("gain_control_data_present",1),A),O]),j={decode:function(){}},I=["single_channel_element","channel_pair_element","coupling_channel_element","lfe_channel_element","data_stream_element","program_config_element","fill_element","end"],M=[(0,r.list)([(0,r.data)("element_instance_tag",(0,s.u)(4)),B]),(0,r.list)([(0,r.data)("element_instance_tag",(0,s.u)(4)),(0,r.data)("common_window",(0,s.u)(1)),(0,i.when)((0,i.equals)("common_window",1),(0,r.list)([S,(0,r.data)("ms_mask_present",(0,s.u)(2)),(0,i.when)((0,i.equals)("ms_mask_present",1),T)])),(0,r.newObj)("ics_1",(0,r.list)([(0,r.data)("type",(0,s.val)("individual_channel_stream")),B])),(0,r.newObj)("ics_2",(0,r.list)([(0,r.data)("type",(0,s.val)("individual_channel_stream")),B]))]),j,(0,r.list)([(0,r.data)("element_instance_tag",(0,s.u)(4)),B]),(0,r.list)([(0,r.data)("element_instance_tag",(0,s.u)(4)),(0,r.data)("data_byte_align_flag",(0,s.u)(1)),(0,r.data)("count",(0,s.u)(8)),(0,r.data)("esc_count",(0,s.val)(0)),(0,i.when)((0,i.equals)("count",255),(0,r.data)("esc_count",(0,s.u)(8))),(0,i.when)((0,i.equals)("data_byte_align_flag",1),(0,r.data)("byte_alignment_bits",s.byteAlign)),(0,i.each)(function(e,t){return e<t.count+t.esc_count},(0,r.data)("data_stream_byte[]",(0,s.u)(8)))]),(0,r.list)([(0,r.data)("element_instance_tag",(0,s.u)(4)),(0,r.data)("profile",(0,s.u)(2)),(0,r.data)("sampling_frequency_index",(0,s.u)(4)),(0,r.data)("num_front_channel_elements",(0,s.u)(4)),(0,r.data)("num_side_channel_elements",(0,s.u)(4)),(0,r.data)("num_back_channel_elements",(0,s.u)(4)),(0,r.data)("num_lfe_channel_elements",(0,s.u)(2)),(0,r.data)("num_assoc_data_elements",(0,s.u)(3)),(0,r.data)("num_valid_cc_elements",(0,s.u)(4)),(0,r.data)("mono_mixdown_present",(0,s.u)(1)),(0,i.when)((0,i.equals)("mono_mixdown_present",1),(0,r.data)("mono_mixdown_element_number",(0,s.u)(4))),(0,r.data)("stereo_mixdown_present",(0,s.u)(1)),(0,i.when)((0,i.equals)("stereo_mixdown_present",1),(0,r.data)("stereo_mixdown_element_number",(0,s.u)(4))),(0,r.data)("matrix_mixdown_idx_present",(0,s.u)(1)),(0,i.when)((0,i.equals)("matrix_mixdown_idx_present",1),(0,r.list)([(0,r.data)("matrix_mixdown_idx",(0,s.u)(2)),(0,r.data)("pseudo_surround_enable",(0,s.u)(1))])),(0,i.each)(function(e,t){return e<t.num_front_channel_elements},(0,r.list)([(0,r.data)("front_element_is_cpe[]",(0,s.u)(1)),(0,r.data)("front_element_tag_select[]",(0,s.u)(4))])),(0,i.each)(function(e,t){return e<t.num_side_channel_elements},(0,r.list)([(0,r.data)("side_element_is_cpe[]",(0,s.u)(1)),(0,r.data)("side_element_tag_select[]",(0,s.u)(4))])),(0,i.each)(function(e,t){return e<t.num_back_channel_elements},(0,r.list)([(0,r.data)("back_element_is_cpe[]",(0,s.u)(1)),(0,r.data)("back_element_tag_select[]",(0,s.u)(4))])),(0,i.each)(function(e,t){return e<t.num_lfe_channel_elements},(0,r.data)("lfe_element_tag_select[]",(0,s.u)(4))),(0,i.each)(function(e,t){return e<t.num_assoc_data_elements},(0,r.data)("assoc_data_element_tag_select[]",(0,s.u)(4))),(0,i.each)(function(e,t){return e<t.num_valid_cc_elements},(0,r.list)([(0,r.data)("cc_element_is_ind_sw[]",(0,s.u)(1)),(0,r.data)("valid_cc_element_tag_select[]",(0,s.u)(4))])),(0,r.data)("byte_alignment_bits",(0,s.byteAlign)()),(0,r.data)("comment_field_bytes",(0,s.u)(8)),(0,i.each)(function(e,t){return e<t.comment_field_bytes},(0,r.data)("comment_field_data[]",(0,s.u)(8)))]),(0,r.list)([(0,r.data)("count",(0,s.u)(4)),(0,r.data)("esc_count",(0,s.val)(0)),(0,
i.when)((0,i.equals)("count",15),(0,r.data)("esc_count",(0,s.u)(8))),(0,i.each)(function(e,t){return e<t.count+t.esc_count-1},(0,r.data)("fill_byte[]",(0,s.u)(8)))]),(0,r.list)([(0,r.data)("byte_alignment_bits",(0,s.byteAlign)())])],L=(0,r.start)("elements",(0,i.whileMoreData)((0,r.newObj)("elements[]",(0,r.list)([(0,r.data)("id_syn_ele",(0,s.u)(3)),(0,i.when)((0,i.equals)("id_syn_ele",0),(0,r.list)([(0,r.data)("type",(0,s.val)(I[0])),M[0]])),(0,i.when)((0,i.equals)("id_syn_ele",1),(0,r.list)([(0,r.data)("type",(0,s.val)(I[1])),M[1]])),(0,i.when)((0,i.equals)("id_syn_ele",2),(0,r.list)([(0,r.data)("type",(0,s.val)(I[2])),M[2]])),(0,i.when)((0,i.equals)("id_syn_ele",3),(0,r.list)([(0,r.data)("type",(0,s.val)(I[3])),M[3]])),(0,i.when)((0,i.equals)("id_syn_ele",4),(0,r.list)([(0,r.data)("type",(0,s.val)(I[4])),M[4]])),(0,i.when)((0,i.equals)("id_syn_ele",5),(0,r.list)([(0,r.data)("type",(0,s.val)(I[5])),M[5]])),(0,i.when)((0,i.equals)("id_syn_ele",6),(0,r.list)([(0,r.data)("type",(0,s.val)(I[6])),M[6]])),(0,i.when)((0,i.equals)("id_syn_ele",7),(0,r.list)([(0,r.data)("type",(0,s.val)(I[7])),M[7]]))]))));a.aacCodec=L;var D=(0,i.when)((0,i.equals)("protection_absent",0),(0,r.data)("crc_check",(0,s.u)(16))),R=(0,r.list)([(0,i.when)((0,i.equals)("protection_absent",0),(0,i.each)(function(e,t,a){return e<a.number_of_raw_data_blocks_in_frame},(0,r.data)("raw_data_block_position[]",(0,s.u)(16)))),D]),N=(0,r.start)("adts_frame",(0,r.list)([(0,r.data)("sync_word",(0,s.u)(12)),(0,r.data)("ID",(0,s.u)(1)),(0,r.data)("layer",(0,s.u)(2)),(0,r.data)("protection_absent",(0,s.u)(1)),(0,r.data)("profile",(0,s.u)(2)),(0,r.data)("sampling_frequency_index",(0,s.u)(4)),(0,r.data)("private_bit",(0,s.u)(1)),(0,r.data)("channel_configuration",(0,s.u)(3)),(0,r.data)("original_copy",(0,s.u)(1)),(0,r.data)("home",(0,s.u)(1)),(0,r.data)("copyright_identification_bit",(0,s.u)(1)),(0,r.data)("copyright_identification_start",(0,s.u)(1)),(0,r.data)("aac_frame_length",(0,s.u)(13)),(0,r.data)("adts_buffer_fullness",(0,s.u)(11)),(0,r.data)("number_of_raw_data_blocks_in_frame",(0,s.u)(2)),(0,i.when)((0,i.equals)("number_of_raw_data_blocks_in_frame",0),(0,r.list)([D,L])),(0,i.when)((0,i.not)((0,i.equals)("number_of_raw_data_blocks_in_frame",0)),(0,r.list)([R,(0,i.each)(function(e,t,a){return e<=a.number_of_raw_data_blocks_in_frame},(0,r.list)([(0,r.newObj)("frames[]",L),D]))]))]));a.adtsCodec=N},{"../../lib/combinators":21,"../../lib/conditionals":22,"../../lib/data-types":23,"../../lib/exp-golomb-string":25,"../../lib/rbsp-utils":27,"./codebooks":1,"./scale-factor-bands":3}],3:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=[[0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,64,72,80,88,96,108,120,132,144,156,172,188,212,240,276,320,384,448,512,576,640,704,768,832,896,960,1024],[0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,64,72,80,88,96,108,120,132,144,156,172,188,212,240,276,320,384,448,512,576,640,704,768,832,896,960,1024],[0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,64,72,80,88,100,112,124,140,156,172,192,216,240,268,304,344,384,424,464,504,544,584,624,664,704,744,784,824,864,904,944,984,1024],[0,4,8,12,16,20,24,28,32,36,40,48,56,64,72,80,88,96,108,120,132,144,160,176,196,216,240,264,292,320,352,384,416,448,480,512,544,576,608,640,672,704,736,768,800,832,864,896,928,1024],[0,4,8,12,16,20,24,28,32,36,40,48,56,64,72,80,88,96,108,120,132,144,160,176,196,216,240,264,292,320,352,384,416,448,480,512,544,576,608,640,672,704,736,768,800,832,864,896,928,1024],[0,4,8,12,16,20,24,28,32,36,40,48,56,64,72,80,88,96,108,120,132,144,160,176,196,216,240,264,292,320,352,384,416,448,480,512,544,576,608,640,672,704,736,768,800,832,864,896,928,960,992,1024],[0,4,8,12,16,20,24,28,32,36,40,44,52,60,68,76,84,92,100,108,116,124,136,148,160,172,188,204,220,240,260,284,308,336,364,396,432,468,508,552,600,652,704,768,832,896,960,1024],[0,4,8,12,16,20,24,28,32,36,40,44,52,60,68,76,84,92,100,108,116,124,136,148,160,172,188,204,220,240,260,284,308,336,364,396,432,468,508,552,600,652,704,768,832,896,960,1024],[0,8,16,24,32,40,48,56,64,72,80,88,100,112,124,136,148,160,172,184,196,212,228,244,260,280,300,320,344,368,396,424,456,492,532,572,616,664,716,772,832,896,960,1024],[0,8,16,24,32,40,48,56,64,72,80,88,100,112,124,136,148,160,172,184,196,212,228,244,260,280,300,320,344,368,396,424,456,492,532,572,616,664,716,772,832,896,960,1024],[0,8,16,24,32,40,48,56,64,72,80,88,100,112,124,136,148,160,172,184,196,212,228,244,260,280,300,320,344,368,396,424,456,492,532,572,616,664,716,772,832,896,960,1024],[0,12,24,36,48,60,72,84,96,108,120,132,144,156,172,188,204,220,236,252,268,288,308,328,348,372,396,420,448,476,508,544,580,620,664,712,764,820,880,944,1024]];a.swb_offset_long_window=n;var r=[[0,4,8,12,16,20,24,32,40,48,64,92,128],[0,4,8,12,16,20,24,32,40,48,64,92,128],[0,4,8,12,16,20,24,32,40,48,64,92,128],[0,4,8,12,16,20,28,36,44,56,68,80,96,112,128],[0,4,8,12,16,20,28,36,44,56,68,80,96,112,128],[0,4,8,12,16,20,28,36,44,56,68,80,96,112,128],[0,4,8,12,16,20,24,28,36,44,52,64,76,92,108,128],[0,4,8,12,16,20,24,28,36,44,52,64,76,92,108,128],[0,4,8,12,16,20,24,28,32,40,48,60,72,88,108,128],[0,4,8,12,16,20,24,28,32,40,48,60,72,88,108,128],[0,4,8,12,16,20,24,28,32,40,48,60,72,88,108,128],[0,4,8,12,16,20,24,28,36,44,52,60,72,88,108,128]];a.swb_offset_short_window=r},{}],4:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("../../lib/combinators"),r=e("../../lib/data-types"),i=(0,n.start)("access_unit_delimiter",(0,n.list)([(0,n.data)("primary_pic_type",(0,r.u)(3)),(0,n.verify)("access_unit_delimiter")]));a.default=i,t.exports=a.default},{"../../lib/combinators":21,"../../lib/data-types":23}],5:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("../../lib/combinators"),i=e("../../lib/data-types"),s=e("../../lib/conditionals"),o=e("./scaling-list"),u=(n(o),null),_=(0,r.list)([(0,r.data)("cpb_cnt_minus1",(0,i.ue)(u)),(0,r.data)("bit_rate_scale",(0,i.u)(4)),(0,r.data)("cpb_size_scale",(0,i.u)(4)),(0,s.each)(function(e,t){return e<=t.cpb_cnt_minus1},(0,r.list)([(0,r.data)("bit_rate_value_minus1[]",(0,i.ue)(u)),(0,r.data)("cpb_size_value_minus1[]",(0,i.ue)(u)),(0,r.data)("cbr_flag[]",(0,i.u)(1))])),(0,r.data)("initial_cpb_removal_delay_length_minus1",(0,i.u)(5)),(0,r.data)("cpb_removal_delay_length_minus1",(0,i.u)(5)),(0,r.data)("dpb_output_delay_length_minus1",(0,i.u)(5)),(0,r.data)("time_offset_length",(0,i.u)(5))]);a.default=_,t.exports=a.default},{"../../lib/combinators":21,"../../lib/conditionals":22,"../../lib/data-types":23,"./scaling-list":8}],6:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("./access-unit-delimiter"),i=n(r),s=e("./seq-parameter-set"),o=n(s),u=e("./pic-parameter-set"),_=n(u),l=e("./slice-layer-without-partitioning"),c=n(l),d=e("../../lib/discard-emulation-prevention"),f=n(d),p=e("./supplemental-enhancement-information"),m=n(p),g={accessUnitDelimiter:i.default,seqParameterSet:o.default,picParameterSet:_.default,sliceLayerWithoutPartitioning:c.default,discardEmulationPrevention:f.default,supplementalEnhancementInformation:m.default};a.default=g,t.exports=a.default},{"../../lib/discard-emulation-prevention":24,"./access-unit-delimiter":4,"./pic-parameter-set":7,"./seq-parameter-set":9,"./slice-layer-without-partitioning":11,"./supplemental-enhancement-information":12}],7:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("../../lib/combinators"),i=e("../../lib/conditionals"),s=e("../../lib/data-types"),o=e("./scaling-list"),u=n(o),_=null,l=(0,r.start)("pic_parameter_set",(0,r.list)([(0,r.data)("pic_parameter_set_id",(0,s.ue)(_)),(0,r.data)("seq_parameter_set_id",(0,s.ue)(_)),(0,r.data)("entropy_coding_mode_flag",(0,s.u)(1)),(0,r.data)("bottom_field_pic_order_in_frame_present_flag",(0,s.u)(1)),(0,r.data)("num_slice_groups_minus1",(0,s.ue)(_)),(0,i.when)((0,i.not)((0,i.equals)("num_slice_groups_minus1",0)),(0,r.list)([(0,r.data)("slice_group_map_type",(0,s.ue)(_)),(0,i.when)((0,i.equals)("slice_group_map_type",0),(0,i.each)(function(e,t){return e<=t.num_slice_groups_minus1},(0,r.data)("run_length_minus1[]",(0,s.ue)(_)))),(0,i.when)((0,i.equals)("slice_group_map_type",2),(0,i.each)(function(e,t){return e<=t.num_slice_groups_minus1},(0,r.list)([(0,r.data)("top_left[]",(0,s.ue)(_)),(0,r.data)("bottom_right[]",(0,s.ue)(_))]))),(0,i.when)((0,i.inArray)("slice_group_map_type",[3,4,5]),(0,r.list)([(0,r.data)("slice_group_change_direction_flag",(0,s.u)(1)),(0,r.data)("slice_group_change_rate_minus1",(0,s.ue)(_))])),(0,i.when)((0,i.equals)("slice_group_map_type",6),(0,r.list)([(0,r.data)("pic_size_in_map_units_minus1",(0,s.ue)(_)),(0,i.each)(function(e,t){return e<=t.pic_size_in_map_units_minus1},(0,r.data)("slice_group_id[]",(0,s.ue)(_)))]))])),(0,r.data)("num_ref_idx_l0_default_active_minus1",(0,s.ue)(_)),(0,r.data)("num_ref_idx_l1_default_active_minus1",(0,s.ue)(_)),(0,r.data)("weighted_pred_flag",(0,s.u)(1)),(0,r.data)("weighted_bipred_idc",(0,s.u)(2)),(0,r.data)("pic_init_qp_minus26",(0,s.se)(_)),(0,r.data)("pic_init_qs_minus26",(0,s.se)(_)),(0,r.data)("chroma_qp_index_offset",(0,s.se)(_)),(0,r.data)("deblocking_filter_control_present_flag",(0,s.u)(1)),(0,r.data)("constrained_intra_pred_flag",(0,s.u)(1)),(0,r.data)("redundant_pic_cnt_present_flag",(0,s.u)(1)),(0,i.whenMoreData)((0,r.list)([(0,r.data)("transform_8x8_mode_flag",(0,s.u)(1)),(0,r.data)("pic_scaling_matrix_present_flag",(0,s.u)(1)),(0,i.when)((0,i.equals)("pic_scaling_matrix_present_flag",1),(0,i.each)(function(e,t){return e<6+(3!==t.chroma_format_Idc?2:6)*t.transform_8x8_mode_flag},(0,r.list)([(0,r.data)("pic_scaling_list_present_flag[]",(0,s.u)(1)),(0,i.when)((0,i.equals)("pic_scaling_list_present_flag[]",1),u.default)]))),(0,r.data)("second_chroma_qp_index_offset",(0,s.se)(_))])),(0,r.verify)("pic_parameter_set")]));a.default=l,t.exports=a.default},{"../../lib/combinators":21,"../../lib/conditionals":22,"../../lib/data-types":23,"./scaling-list":8}],8:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n={decode:function(e,t,a,n){var r=8,i=8,s=void 0,o=16,u=[];Array.isArray(t.scalingList)||(t.scalingList=[]),n>=6&&(o=64);for(var _=0;_<o;_++)0!==i&&(s=e.readExpGolomb(),i=(r+s+256)%256),u[_]=0===i?r:i,r=u[_];return t.scalingList[n]=u,t},encode:function(e,t,a,n){var r=8,i=8,s=16,o="";if(!Array.isArray(t.scalingList))return"";n>=6&&(s=64);for(var u=o.scalingList[n],_=0;_<s;_++){if(u[_]===r){o+=e.writeExpGolomb(-r);break}i=u[_]-r,o+=e.writeExpGolomb(i),r=u[_]}return o}};a.default=n,t.exports=a.default},{}],9:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("../../lib/combinators"),i=e("../../lib/conditionals"),s=e("../../lib/data-types"),o=e("./scaling-list"),u=n(o),_=e("./vui-parameters"),l=n(_),c=null,d=[44,83,86,100,110,118,122,128,134,138,139,244],f={read:function(e,t,a,n){return t.chroma_format_idc||a.chroma_format_idc},write:function(){}},p=(0,r.start)("seq_parameter_set",(0,r.list)([(0,r.data)("chroma_format_idc",(0,s.val)(1)),(0,r.data)("video_format",(0,s.val)(5)),(0,r.data)("color_primaries",(0,s.val)(2)),(0,r.data)("transfer_characteristics",(0,s.val)(2)),(0,r.data)("sample_ratio",(0,s.val)(1)),(0,r.data)("profile_idc",(0,s.u)(8)),(0,r.data)("constraint_set0_flag",(0,s.u)(1)),(0,r.data)("constraint_set1_flag",(0,s.u)(1)),(0,r.data)("constraint_set2_flag",(0,s.u)(1)),(0,r.data)("constraint_set3_flag",(0,s.u)(1)),(0,r.data)("constraint_set4_flag",(0,s.u)(1)),(0,r.data)("constraint_set5_flag",(0,s.u)(1)),(0,r.data)("constraint_set6_flag",(0,s.u)(1)),(0,r.data)("constraint_set7_flag",(0,s.u)(1)),(0,r.data)("level_idc",(0,s.u)(8)),(0,r.data)("seq_parameter_set_id",(0,s.ue)(c)),(0,i.when)((0,i.inArray)("profile_idc",d),(0,r.list)([(0,r.data)("chroma_format_idc",(0,s.ue)(c)),(0,i.when)((0,i.equals)("chroma_format_idc",3),(0,r.data)("separate_colour_plane_flag",(0,s.u)(1))),(0,i.when)((0,i.not)((0,i.equals)("chroma_format_idc",3)),(0,r.data)("separate_colour_plane_flag",(0,s.val)(0))),(0,r.data)("bit_depth_luma_minus8",(0,s.ue)(c)),(0,r.data)("bit_depth_chroma_minus8",(0,s.ue)(c)),(0,r.data)("qpprime_y_zero_transform_bypass_flag",(0,s.u)(1)),(0,r.data)("seq_scaling_matrix_present_flag",(0,s.u)(1)),(0,i.when)((0,i.equals)("seq_scaling_matrix_present_flag",1),(0,i.each)(function(e,t){return e<(3!==t.chroma_format_idc?8:12)},(0,r.list)([(0,r.data)("seq_scaling_list_present_flag[]",(0,s.u)(1)),(0,i.when)((0,i.equals)("seq_scaling_list_present_flag[]",1),u.default)])))])),(0,r.data)("log2_max_frame_num_minus4",(0,s.ue)(c)),(0,r.data)("pic_order_cnt_type",(0,s.ue)(c)),(0,i.when)((0,i.equals)("pic_order_cnt_type",0),(0,r.data)("log2_max_pic_order_cnt_lsb_minus4",(0,s.ue)(c))),(0,i.when)((0,i.equals)("pic_order_cnt_type",1),(0,r.list)([(0,r.data)("delta_pic_order_always_zero_flag",(0,s.u)(1)),(0,r.data)("offset_for_non_ref_pic",(0,s.se)(c)),(0,r.data)("offset_for_top_to_bottom_field",(0,s.se)(c)),(0,r.data)("num_ref_frames_in_pic_order_cnt_cycle",(0,s.ue)(c)),(0,i.each)(function(e,t){return e<t.num_ref_frames_in_pic_order_cnt_cycle},(0,r.data)("offset_for_ref_frame[]",(0,s.se)(c)))])),(0,r.data)("max_num_ref_frames",(0,s.ue)(c)),(0,r.data)("gaps_in_frame_num_value_allowed_flag",(0,s.u)(1)),(0,r.data)("pic_width_in_mbs_minus1",(0,s.ue)(c)),(0,r.data)("pic_height_in_map_units_minus1",(0,s.ue)(c)),(0,r.data)("frame_mbs_only_flag",(0,s.u)(1)),(0,i.when)((0,i.equals)("frame_mbs_only_flag",0),(0,r.data)("mb_adaptive_frame_field_flag",(0,s.u)(1))),(0,r.data)("direct_8x8_inference_flag",(0,s.u)(1)),(0,r.data)("frame_cropping_flag",(0,s.u)(1)),(0,i.when)((0,i.equals)("frame_cropping_flag",1),(0,r.list)([(0,r.data)("frame_crop_left_offset",(0,s.ue)(c)),(0,r.data)("frame_crop_right_offset",(0,s.ue)(c)),(0,r.data)("frame_crop_top_offset",(0,s.ue)(c)),(0,r.data)("frame_crop_bottom_offset",(0,s.ue)(c))])),(0,r.data)("vui_parameters_present_flag",(0,s.u)(1)),(0,i.when)((0,i.equals)("vui_parameters_present_flag",1),l.default),(0,i.when)((0,i.equals)("separate_colour_plane_flag",1),(0,r.data)("ChromaArrayType",(0,s.val)(0))),(0,i.when)((0,i.equals)("separate_colour_plane_flag",0),(0,r.data)("ChromaArrayType",f)),(0,r.verify)("seq_parameter_set")]));a.default=p,t.exports=a.default},{"../../lib/combinators":21,"../../lib/conditionals":22,"../../lib/data-types":23,"./scaling-list":8,"./vui-parameters":13}],10:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("../../lib/combinators"),r=e("../../lib/conditionals"),i=e("../../lib/data-types"),s=null,o={P:[0,5],B:[1,6],I:[2,7],SP:[3,8],SI:[4,9]},u=function(e,t,a,n){return a.log2_max_frame_num_minus4+4},_=function(e,t,a,n){return a.log2_max_pic_order_cnt_lsb_minus4+4},l=function(e,t,a,n){var r=a.pic_height_in_map_units_minus1+1,i=a.pic_width_in_mbs_minus1+1,s=a.slice_group_change_rate_minus1+1,o=i*r;return Math.ceil(Math.log(o/s+1)/Math.LN2)},c=(0,r.some)([(0,r.every)([(0,r.equals)("weighted_pred_flag",1),(0,r.some)([(0,r.inArray)("slice_type",o.P),(0,r.inArray)("slice_type",o.SP)])]),(0,r.every)([(0,r.equals)("weighted_bipred_idc",1),(0,r.inArray)("slice_type",o.B)])]),d=(0,n.list)([(0,r.when)((0,r.every)([(0,r.not)((0,r.inArray)("slice_type",o.I)),(0,r.not)((0,r.inArray)("slice_type",o.SI))]),(0,n.list)([(0,n.data)("ref_pic_list_modification_flag_l0",(0,i.u)(1)),(0,r.when)((0,r.equals)("ref_pic_list_modification_flag_l0",1),(0,r.each)(function(e,t){return 0===e||3!==t.modification_of_pic_nums_idc_l0[e-1]},(0,n.list)([(0,n.data)("modification_of_pic_nums_idc_l0[]",(0,i.ue)(s)),(0,r.when)((0,r.inArray)("modification_of_pic_nums_idc_l0[]",[0,1]),(0,n.data)("abs_diff_pic_num_minus1_l0[]",(0,i.ue)(s))),(0,r.when)((0,r.equals)("modification_of_pic_nums_idc_l0[]",2),(0,n.data)("long_term_pic_num_l0[]",(0,i.ue)(s)))])))])),(0,r.when)((0,r.inArray)("slice_type",o.B),(0,n.list)([(0,n.data)("ref_pic_list_modification_flag_l1",(0,i.u)(1)),(0,r.when)((0,r.equals)("ref_pic_list_modification_flag_l1",1),(0,r.each)(function(e,t){return 0===e||3!==t.modification_of_pic_nums_idc_l1[e-1]},(0,n.list)([(0,n.data)("modification_of_pic_nums_idc_l1[]",(0,i.ue)(s)),(0,r.when)((0,r.inArray)("modification_of_pic_nums_idc_l1[]",[0,1]),(0,n.data)("abs_diff_pic_num_minus1_l1[]",(0,i.ue)(s))),(0,r.when)((0,r.equals)("modification_of_pic_nums_idc_l1[]",2),(0,n.data)("long_term_pic_num_l1[]",(0,i.ue)(s)))])))]))]),f={encode:function(){throw new Error("ref_pic_list_mvc_modification: NOT IMPLEMENTED!")},decode:function(){throw new Error("ref_pic_list_mvc_modification: NOT IMPLEMENTED!")}},p=(0,n.list)([(0,n.data)("luma_log2_weight_denom",(0,i.ue)(s)),(0,r.when)((0,r.not)((0,r.equals)("ChromaArrayType",0)),(0,n.data)("chroma_log2_weight_denom",(0,i.ue)(s))),(0,r.each)(function(e,t){return e<=t.num_ref_idx_l0_active_minus1},(0,n.list)([(0,n.data)("luma_weight_l0_flag",(0,i.u)(1)),(0,r.when)((0,r.equals)("luma_weight_l0_flag",1),(0,n.list)([(0,n.data)("luma_weight_l0[]",(0,i.se)(s)),(0,n.data)("luma_offset_l0[]",(0,i.se)(s)),(0,r.when)((0,r.not)((0,r.equals)("ChromaArrayType",0)),(0,n.list)([(0,n.data)("chroma_weight_l0_flag",(0,i.u)(1)),(0,r.when)((0,r.equals)("chroma_weight_l0_flag",1),(0,n.list)([(0,n.data)("chroma_weight_l0_Cr[]",(0,i.se)(s)),(0,n.data)("chroma_offset_l0_Cr[]",(0,i.se)(s)),(0,n.data)("chroma_weight_l0_Cb[]",(0,i.se)(s)),(0,n.data)("chroma_offset_l0_Cb[]",(0,i.se)(s))]))]))]))])),(0,r.when)((0,r.inArray)("slice_type",o.B),(0,r.each)(function(e,t){return e<=t.num_ref_idx_l1_active_minus1},(0,n.list)([(0,n.data)("luma_weight_l1_flag",(0,i.u)(1)),(0,r.when)((0,r.equals)("luma_weight_l1_flag",1),(0,n.list)([(0,n.data)("luma_weight_l1[]",(0,i.se)(s)),(0,n.data)("luma_offset_l1[]",(0,i.se)(s)),(0,r.when)((0,r.not)((0,r.equals)("ChromaArrayType",0)),(0,n.list)([(0,n.data)("chroma_weight_l1_flag",(0,i.u)(1)),(0,r.when)((0,r.equals)("chroma_weight_l1_flag",1),(0,n.list)([(0,n.data)("chroma_weight_l1_Cr[]",(0,i.se)(s)),(0,n.data)("chroma_offset_l1_Cr[]",(0,i.se)(s)),(0,n.data)("chroma_weight_l1_Cb[]",(0,i.se)(s)),(0,n.data)("chroma_offset_l1_Cb[]",(0,i.se)(s))]))]))]))])))]),m=(0,n.list)([(0,r.when)((0,r.equals)("nal_unit_type",5),(0,n.list)([(0,n.data)("no_output_of_prior_pics_flag",(0,i.u)(1)),(0,n.data)("long_term_reference_flag",(0,i.u)(1))])),(0,r.when)((0,r.not)((0,r.equals)("nal_unit_type",5)),(0,n.list)([(0,n.data)("adaptive_ref_pic_marking_mode_flag",(0,i.u)(1)),(0,r.when)((0,r.equals)("adaptive_ref_pic_marking_mode_flag",1),(0,r.each)(function(e,t){return 0===e||0!==t.memory_management_control_operation[e-1]},(0,n.list)([(0,n.data)("memory_management_control_operation[]",(0,i.ue)(s)),(0,r.when)((0,r.inArray)("memory_management_control_operation[]",[1,3]),(0,n.data)("difference_of_pic_nums_minus1[]",(0,i.ue)(s))),(0,r.when)((0,r.inArray)("memory_management_control_operation[]",[2]),(0,n.data)("long_term_pic_num[]",(0,i.ue)(s))),(0,r.when)((0,r.inArray)("memory_management_control_operation[]",[3,6]),(0,n.data)("long_term_frame_idx[]",(0,i.ue)(s))),(0,r.when)((0,r.inArray)("memory_management_control_operation[]",[4]),(0,n.data)("max_long_term_frame_idx_plus1[]",(0,i.ue)(s)))])))]))]),g=(0,n.list)([(0,n.data)("first_mb_in_slice",(0,i.ue)(s)),(0,n.data)("slice_type",(0,i.ue)(s)),(0,n.data)("pic_parameter_set_id",(0,i.ue)(s)),(0,r.when)((0,r.equals)("separate_colour_plane_flag",1),(0,n.data)("colour_plane_id",(0,i.u)(2))),(0,n.data)("frame_num",(0,i.u)(u)),(0,r.when)((0,r.equals)("frame_mbs_only_flag",0),(0,n.list)([(0,n.data)("field_pic_flag",(0,i.u)(1)),(0,r.when)((0,r.equals)("field_pic_flag",1),(0,n.data)("bottom_field_flag",(0,i.u)(1)))])),(0,r.when)((0,r.equals)("idrPicFlag",1),(0,n.data)("idr_pic_id",(0,i.ue)(s))),(0,r.when)((0,r.equals)("pic_order_cnt_type",0),(0,n.list)([(0,n.data)("pic_order_cnt_lsb",(0,i.u)(_)),(0,r.when)((0,r.every)([(0,r.equals)("bottom_field_pic_order_in_frame_present_flag",1),(0,r.not)((0,r.equals)("field_pic_flag",1))]),(0,n.data)("delta_pic_order_cnt_bottom",(0,i.se)(s)))])),(0,r.when)((0,r.every)([(0,r.equals)("pic_order_cnt_type",1),(0,r.not)((0,r.equals)("delta_pic_order_always_zero_flag",1))]),(0,n.list)([(0,n.data)("delta_pic_order_cnt[0]",(0,i.se)(s)),(0,r.when)((0,r.every)([(0,r.equals)("bottom_field_pic_order_in_frame_present_flag",1),(0,r.not)((0,r.equals)("field_pic_flag",1))]),(0,n.data)("delta_pic_order_cnt[1]",(0,i.se)(s)))])),(0,r.when)((0,r.equals)("redundant_pic_cnt_present_flag",1),(0,n.data)("redundant_pic_cnt",(0,i.ue)(s))),(0,r.when)((0,r.inArray)("slice_type",o.B),(0,n.data)("direct_spatial_mv_pred_flag",(0,i.u)(1))),(0,r.when)((0,r.some)([(0,r.inArray)("slice_type",o.P),(0,r.inArray)("slice_type",o.SP),(0,r.inArray)("slice_type",o.B)]),(0,n.list)([(0,n.data)("num_ref_idx_active_override_flag",(0,i.u)(1)),(0,r.when)((0,r.equals)("num_ref_idx_active_override_flag",1),(0,n.list)([(0,n.data)("num_ref_idx_l0_active_minus1",(0,i.ue)(s)),(0,r.when)((0,r.inArray)("slice_type",o.B),(0,n.data)("num_ref_idx_l1_active_minus1",(0,i.ue)(s)))]))])),(0,r.when)((0,r.some)([(0,r.equals)("nal_unit_type",20),(0,r.equals)("nal_unit_type",21)]),f),(0,r.when)((0,r.every)([(0,r.not)((0,r.equals)("nal_unit_type",20)),(0,r.not)((0,r.equals)("nal_unit_type",21))]),d),(0,r.when)(c,p),(0,r.when)((0,r.not)((0,r.equals)("nal_ref_idc",0)),m),(0,r.when)((0,r.every)([(0,r.equals)("entropy_coding_mode_flag",1),(0,r.not)((0,r.inArray)("slice_type",o.I)),(0,r.not)((0,r.inArray)("slice_type",o.SI))]),(0,n.data)("cabac_init_idc",(0,i.ue)(s))),(0,n.data)("slice_qp_delta",(0,i.se)(s)),(0,r.when)((0,r.inArray)("slice_type",o.SP),(0,n.data)("sp_for_switch_flag",(0,i.u)(1))),(0,r.when)((0,r.some)([(0,r.inArray)("slice_type",o.SP),(0,r.inArray)("slice_type",o.SI)]),(0,n.data)("slice_qs_delta",(0,i.se)(s))),(0,r.when)((0,r.equals)("deblocking_filter_control_present_flag",1),(0,n.list)([(0,n.data)("disable_deblocking_filter_idc",(0,i.ue)(s)),(0,r.when)((0,r.not)((0,r.equals)("disable_deblocking_filter_idc",1)),(0,n.list)([(0,n.data)("slice_alpha_c0_offset_div2",(0,i.se)(s)),(0,n.data)("slice_beta_offset_div2",(0,i.se)(s))]))])),(0,r.when)((0,r.every)([(0,r.not)((0,r.equals)("num_slice_groups_minus1",0)),(0,r.some)([(0,r.equals)("slice_group_map_type",3),(0,r.equals)("slice_group_map_type",4),(0,r.equals)("slice_group_map_type",5)])]),(0,n.data)("slice_group_change_cycle",(0,i.u)(l)))]);a.default=g,t.exports=a.default},{"../../lib/combinators":21,"../../lib/conditionals":22,"../../lib/data-types":23}],11:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("./slice-header"),i=n(r),s=e("../../lib/combinators"),o=(0,s.start)("slice_layer_without_partitioning",(0,s.list)([i.default]));a.default=o,t.exports=a.default},{"../../lib/combinators":21,"./slice-header":10}],12:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("../../lib/exp-golomb-string"),r=e("../../lib/combinators"),i=e("../../lib/conditionals"),s=e("../../lib/data-types"),o=e("../../lib/rbsp-utils"),u=null,_=((0,r.list)([]),function(e,t,a,n){return a.initial_cpb_removal_delay_length_minus1+1}),l=function(e,t,a,n){return a.cpb_removal_delay_length_minus1+1},c=function(e,t,a,n){return a.dpb_output_delay_length_minus1+1},d=function(e,t,a,n){return a.time_offset_length},f={0:{name:"buffering_period",codec:(0,r.list)([(0,r.data)("seq_parameter_set_id",(0,s.ue)(u)),(0,i.when)((0,i.equals)("nal_hrd_parameters_present_flag",1),(0,i.each)(function(e,t,a){return e<=a.cpb_cnt_minus1},(0,r.list)([(0,r.data)("initial_cpb_removal_delay[]",(0,s.u)(_)),(0,r.data)("initial_cpb_removal_delay_offset[]",(0,s.u)(_))]))),(0,i.when)((0,i.equals)("vcl_hrd_parameters_present_flag",1),(0,i.each)(function(e,t,a){return e<=a.cpb_cnt_minus1},(0,r.list)([(0,r.data)("initial_cpb_removal_delay[]",(0,s.u)(_)),(0,r.data)("initial_cpb_removal_delay_offset[]",(0,s.u)(_))])))])},1:{name:"pic_timing",codec:(0,r.list)([(0,i.when)((0,i.some)([(0,i.equals)("nal_hrd_parameters_present_flag",1),(0,i.equals)("vcl_hrd_parameters_present_flag",1)]),(0,r.list)([(0,r.data)("cpb_removal_delay",(0,s.u)(l)),(0,r.data)("dpb_output_delay",(0,s.u)(c))])),(0,i.when)((0,i.equals)("pic_struct_present_flag",1),(0,r.list)([(0,r.data)("pic_struct",(0,s.u)(4)),(0,i.when)((0,i.equals)("pic_struct",0),(0,r.data)("NumClockTS",(0,s.val)(1))),(0,i.when)((0,i.equals)("pic_struct",1),(0,r.data)("NumClockTS",(0,s.val)(1))),(0,i.when)((0,i.equals)("pic_struct",2),(0,r.data)("NumClockTS",(0,s.val)(1))),(0,i.when)((0,i.equals)("pic_struct",3),(0,r.data)("NumClockTS",(0,s.val)(2))),(0,i.when)((0,i.equals)("pic_struct",4),(0,r.data)("NumClockTS",(0,s.val)(2))),(0,i.when)((0,i.equals)("pic_struct",5),(0,r.data)("NumClockTS",(0,s.val)(3))),(0,i.when)((0,i.equals)("pic_struct",6),(0,r.data)("NumClockTS",(0,s.val)(3))),(0,i.when)((0,i.equals)("pic_struct",7),(0,r.data)("NumClockTS",(0,s.val)(2))),(0,i.when)((0,i.equals)("pic_struct",8),(0,r.data)("NumClockTS",(0,s.val)(2))),(0,i.each)(function(e,t){return e<t.NumClockTS},(0,r.list)([(0,r.data)("clock_timestamp_flag[]",(0,s.u)(1)),(0,i.when)((0,i.equals)("clock_timestamp_flag[]",1),(0,r.list)([(0,r.data)("ct_type[]",(0,s.u)(2)),(0,r.data)("nuit_field_based_flag[]",(0,s.u)(1)),(0,r.data)("counting_type[]",(0,s.u)(5)),(0,r.data)("full_timestamp_flag[]",(0,s.u)(1)),(0,r.data)("discontinuity_flag[]",(0,s.u)(1)),(0,r.data)("cnt_dropped_flag[]",(0,s.u)(1)),(0,r.data)("n_frames[]",(0,s.u)(8)),(0,i.when)((0,i.equals)("full_timestamp_flag[]",1),(0,r.list)([(0,r.data)("seconds_value[]",(0,s.u)(6)),(0,r.data)("minutes_value[]",(0,s.u)(6)),(0,r.data)("hours_value[]",(0,s.u)(5))])),(0,i.when)((0,i.equals)("full_timestamp_flag[]",0),(0,r.list)([(0,r.data)("seconds_flag[]",(0,s.u)(1)),(0,i.when)((0,i.equals)("seconds_flag[]",1),(0,r.list)([(0,r.data)("seconds_value[]",(0,s.u)(6)),(0,r.data)("minutes_flag[]",(0,s.u)(1)),(0,i.when)((0,i.equals)("minutes_flag[]",1),(0,r.list)([(0,r.data)("minutes_value[]",(0,s.u)(6)),(0,r.data)("hours_flag[]",(0,s.u)(1)),(0,i.when)((0,i.equals)("hours_flag[]",1),(0,r.data)("hours_value[]",(0,s.u)(5)))]))]))])),(0,i.when)((0,i.gt)("time_offset_length",0),(0,r.data)("time_offset",(0,s.u)(d)))]))]))]))])},2:{name:"pan_scan_rect"},3:{name:"filler_payload"},4:{name:"user_data_registered_itu_t_t35",codec:(0,r.list)([(0,r.data)("itu_t_t35_country_code",(0,s.u)(8)),(0,r.data)("itu_t_t35_provider_code",(0,s.u)(16)),(0,i.when)((0,i.equals)("itu_t_t35_provider_code",49),(0,r.data)("ATSC_user_identifier",(0,s.u)(32))),(0,i.when)((0,i.inArray)("itu_t_t35_provider_code",[47,49]),(0,r.data)("ATSC1_data_user_data_type_code",(0,s.u)(8))),(0,i.when)((0,i.equals)("itu_t_t35_provider_code",47),(0,r.data)("DIRECTV_user_data_length",(0,s.u)(8))),(0,r.data)("process_em_data_flag",(0,s.u)(1)),(0,r.data)("process_cc_data_flag",(0,s.u)(1)),(0,r.data)("additional_data_flag",(0,s.u)(1)),(0,r.data)("cc_count",(0,s.u)(5)),(0,r.data)("em_data",(0,s.u)(8)),(0,i.each)(function(e,t){return e<t.cc_count},(0,r.newObj)("cc_data_pkts[]",(0,r.list)([(0,r.data)("type",(0,s.val)("cc_data_pkt")),(0,r.data)("marker_bits",(0,s.u)(5)),(0,r.data)("cc_valid",(0,s.u)(1)),(0,r.data)("cc_type",(0,s.u)(2)),(0,r.data)("cc_data_1",(0,s.u)(8)),(0,r.data)("cc_data_2",(0,s.u)(8))]))),(0,r.data)("marker_bits",(0,s.u)(8))])},5:{name:"user_data_unregistered"},6:{name:"recovery_point",codec:(0,r.list)([(0,r.data)("recovery_frame_cnt",(0,s.ue)(u)),(0,r.data)("exact_match_flag",(0,s.u)(1)),(0,r.data)("broken_link_flag",(0,s.u)(1)),(0,r.data)("changing_slice_group_idc",(0,s.u)(2))])},7:{name:"dec_ref_pic_marking_repetition"},8:{name:"spare_pic"},9:{name:"scene_info"},10:{name:"sub_seq_info"},11:{name:"sub_seq_layer_characteristics"},12:{name:"sub_seq_characteristics"},13:{name:"full_frame_freeze"},14:{name:"full_frame_freeze_release"},15:{name:"full_frame_snapshot"},16:{name:"progressive_refinement_segment_start"},17:{name:"progressive_refinement_segment_end"},18:{name:"motion_constrained_slice_group_set"},19:{name:"film_grain_characteristics"},20:{name:"deblocking_filter_display_preference"},21:{name:"stereo_video_info"},22:{name:"post_filter_hint"},23:{name:"tone_mapping_info"},24:{name:"scalability_info"},25:{name:"sub_pic_scalable_layer"},26:{name:"non_required_layer_rep"},27:{name:"priority_layer_info"},28:{name:"layers_not_present"},29:{name:"layer_dependency_change"},30:{name:"scalable_nesting"},31:{name:"base_layer_temporal_hrd"},32:{name:"quality_layer_integrity_check"},33:{name:"redundant_pic_property"},34:{name:"tl"},35:{name:"tl_switching_point"},36:{name:"parallel_decoding_info"},37:{name:"mvc_scalable_nesting"},38:{name:"view_scalability_info"},39:{name:"multiview_scene_info"},40:{name:"multiview_acquisition_info"},41:{name:"non_required_view_component"},42:{name:"view_dependency_change"},43:{name:"operation_points_not_present"},44:{name:"base_view_temporal_hrd"},45:{name:"frame_packing_arrangement"}},p={decode:function(e,t,a,r){var i={payloadType:0,payloadSize:0},s=void 0;do s=e.readUnsignedByte(),i.payloadType+=s;while(255===s);do s=e.readUnsignedByte(),i.payloadSize+=s;while(255===s);var u=f[i.payloadType],_=e.readRawBits(8*i.payloadSize);if(u)if(i.type=u.name,u.codec){var l=new n.ExpGolombDecoder(_);u.codec.decode(l,i,a)}else i.data=(0,o.bitStringToTypedArray)(_);else i.type="unknown type",i.data=(0,o.bitStringToTypedArray)(_);return t[r]=i,t},encode:function(e,t,a,r){for(var i=t[r],s=i.payloadType;s>255;)s-=255,e.writeUnsignedByte(255);e.writeUnsignedByte(s);for(var u=i.payloadSize;u>255;)u-=255,e.writeUnsignedByte(255);e.writeUnsignedByte(u);var _=f[i.payloadType];if(_&&_.codec){var l=new n.ExpGolombEncoder;_.codec.encode(l,i,a);var c=l.bitReservoir;c.length%8!==0&&(c=(0,o.appendRBSPTrailingBits)(c)),e.writeRawBits(8*i.payloadSize,c)}else i.data?e.writeRawBits(8*i.payloadSize,(0,o.typedArrayToBitString)(i.data)):e.writeRawBits(8*i.payloadSize,"")}},m=(0,r.startArray)("sei_message",(0,i.whileMoreData)(p));a.default=m,t.exports=a.default},{"../../lib/combinators":21,"../../lib/conditionals":22,"../../lib/data-types":23,"../../lib/exp-golomb-string":25,"../../lib/rbsp-utils":27}],13:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("../../lib/combinators"),i=e("../../lib/conditionals"),s=e("../../lib/data-types"),o=e("./hdr-parameters"),u=n(o),_=null,l=(0,r.list)([(0,i.when)((0,i.equals)("aspect_ratio_idc",1),(0,r.data)("sample_ratio",(0,s.val)(1))),(0,i.when)((0,i.equals)("aspect_ratio_idc",2),(0,r.data)("sample_ratio",(0,s.val)(12/11))),(0,i.when)((0,i.equals)("aspect_ratio_idc",3),(0,r.data)("sample_ratio",(0,s.val)(10/11))),(0,i.when)((0,i.equals)("aspect_ratio_idc",4),(0,r.data)("sample_ratio",(0,s.val)(16/11))),(0,i.when)((0,i.equals)("aspect_ratio_idc",5),(0,r.data)("sample_ratio",(0,s.val)(40/33))),(0,i.when)((0,i.equals)("aspect_ratio_idc",6),(0,r.data)("sample_ratio",(0,s.val)(24/11))),(0,i.when)((0,i.equals)("aspect_ratio_idc",7),(0,r.data)("sample_ratio",(0,s.val)(20/11))),(0,i.when)((0,i.equals)("aspect_ratio_idc",8),(0,r.data)("sample_ratio",(0,s.val)(32/11))),(0,i.when)((0,i.equals)("aspect_ratio_idc",9),(0,r.data)("sample_ratio",(0,s.val)(80/33))),(0,i.when)((0,i.equals)("aspect_ratio_idc",10),(0,r.data)("sample_ratio",(0,s.val)(18/11))),(0,i.when)((0,i.equals)("aspect_ratio_idc",11),(0,r.data)("sample_ratio",(0,s.val)(15/11))),(0,i.when)((0,i.equals)("aspect_ratio_idc",12),(0,r.data)("sample_ratio",(0,s.val)(64/33))),(0,i.when)((0,i.equals)("aspect_ratio_idc",13),(0,r.data)("sample_ratio",(0,s.val)(160/99))),(0,i.when)((0,i.equals)("aspect_ratio_idc",14),(0,r.data)("sample_ratio",(0,s.val)(4/3))),(0,i.when)((0,i.equals)("aspect_ratio_idc",15),(0,r.data)("sample_ratio",(0,s.val)(1.5))),(0,i.when)((0,i.equals)("aspect_ratio_idc",16),(0,r.data)("sample_ratio",(0,s.val)(2))),(0,i.when)((0,i.equals)("aspect_ratio_idc",255),(0,
r.list)([(0,r.data)("sar_width",(0,s.u)(16)),(0,r.data)("sar_height",(0,s.u)(16)),(0,r.data)("sample_ratio",(0,s.val)(function(e,t,a){return t.sar_width/t.sar_height}))]))]),c=(0,r.list)([(0,r.data)("aspect_ratio_info_present_flag",(0,s.u)(1)),(0,i.when)((0,i.equals)("aspect_ratio_info_present_flag",1),(0,r.list)([(0,r.data)("aspect_ratio_idc",(0,s.u)(8)),l])),(0,r.data)("overscan_info_present_flag",(0,s.u)(1)),(0,i.when)((0,i.equals)("overscan_info_present_flag",1),(0,r.data)("overscan_appropriate_flag",(0,s.u)(1))),(0,r.data)("video_signal_type_present_flag",(0,s.u)(1)),(0,i.when)((0,i.equals)("video_signal_type_present_flag",1),(0,r.list)([(0,r.data)("video_format",(0,s.u)(3)),(0,r.data)("video_full_range_flag",(0,s.u)(1)),(0,r.data)("colour_description_present_flag",(0,s.u)(1)),(0,i.when)((0,i.equals)("colour_description_present_flag",1),(0,r.list)([(0,r.data)("colour_primaries",(0,s.u)(8)),(0,r.data)("transfer_characteristics",(0,s.u)(8)),(0,r.data)("matrix_coefficients",(0,s.u)(8))]))])),(0,r.data)("chroma_loc_info_present_flag",(0,s.u)(1)),(0,i.when)((0,i.equals)("chroma_loc_info_present_flag",1),(0,r.list)([(0,r.data)("chroma_sample_loc_type_top_field",(0,s.ue)(_)),(0,r.data)("chroma_sample_loc_type_bottom_field",(0,s.ue)(_))])),(0,r.data)("timing_info_present_flag",(0,s.u)(1)),(0,i.when)((0,i.equals)("timing_info_present_flag",1),(0,r.list)([(0,r.data)("num_units_in_tick",(0,s.u)(32)),(0,r.data)("time_scale",(0,s.u)(32)),(0,r.data)("fixed_frame_rate_flag",(0,s.u)(1))])),(0,r.data)("nal_hrd_parameters_present_flag",(0,s.u)(1)),(0,i.when)((0,i.equals)("nal_hrd_parameters_present_flag",1),u.default),(0,r.data)("vcl_hrd_parameters_present_flag",(0,s.u)(1)),(0,i.when)((0,i.equals)("vcl_hrd_parameters_present_flag",1),u.default),(0,i.when)((0,i.some)([(0,i.equals)("nal_hrd_parameters_present_flag",1),(0,i.equals)("vcl_hrd_parameters_present_flag",1)]),(0,r.data)("low_delay_hrd_flag",(0,s.u)(1))),(0,r.data)("pic_struct_present_flag",(0,s.u)(1)),(0,r.data)("bitstream_restriction_flag",(0,s.u)(1)),(0,i.when)((0,i.equals)("bitstream_restriction_flag",1),(0,r.list)([(0,r.data)("motion_vectors_over_pic_boundaries_flag",(0,s.u)(1)),(0,r.data)("max_bytes_per_pic_denom",(0,s.ue)(_)),(0,r.data)("max_bits_per_mb_denom",(0,s.ue)(_)),(0,r.data)("log2_max_mv_length_horizontal",(0,s.ue)(_)),(0,r.data)("log2_max_mv_length_vertical",(0,s.ue)(_)),(0,r.data)("max_num_reorder_frames",(0,s.ue)(_)),(0,r.data)("max_dec_frame_buffering",(0,s.ue)(_))]))]);a.default=c,t.exports=a.default},{"../../lib/combinators":21,"../../lib/conditionals":22,"../../lib/data-types":23,"./hdr-parameters":5}],14:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("../../bit-streams/aac/raw_bit_stream"),r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=function(e){return aacBitStream.decode(e,{},[])};a.parseAac=i;var s=function(e){for(var t=[],a=0,i=0,s=e.data;a<s.length;)if(255===s[a]&&240===(246&s[a+1])){var o=(8&s[a+1])>>3,u=(6&s[a+1])>>1,_=1&s[a+1],l=(s[a+2]>>>6&3)+1,c=(60&s[a+2])>>>2,d=(1&s[a+2])<<2|(192&s[a+3])>>>6,f=(3&s[a+3])<<11|s[a+4]<<3|(224&s[a+5])>>5,p=(31&s[a+5])<<5|(252&s[a+6])>>2,m=3&s[a+6],g=r[c],h=_?0:2,b=1024*((3&s[a+6])+1),y=9e4*b/g,v=a+f,w=s.subarray(a+7+h,v),x={type:"frame",pts:e.pts+i*y,dts:e.dts+i*y,ID:o,layer:u,sample_count:b,protection_absent:_,profile:l,channel_configuration:d,sampling_rate:g,sampling_frequency_index:c,aac_frame_length:f,adts_buffer_fullness:p,number_of_raw_data_blocks_in_frame:m,data:w},z={no_trailer_bits:!0,sampling_frequency_index:x.sampling_frequency_index};x.elements=n.aacCodec.decode(x.data,z),t.push(x),a=v,i++}else a++;return t};a.parseAdts=s},{"../../bit-streams/aac/raw_bit_stream":2}],15:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e,t){var a=Array.prototype.slice.call(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),n=a.reduce(r(16),[]).map(function(e){return e.map(function(e){return e<=31||e>=127&&e<=159?".":String.fromCharCode(e)}).map(function(e){return"&"===e?"&amp;":"<"===e?"&lt;":e})}).map(function(e){return e.join("")}),i=a.map(function(e){return("00"+e.toString(16)).slice(-2)}).reduce(r(8),[]).reduce(r(2),[]).map(function(e){return e.map(function(e){return e.join(" ")}).join("  ")});return i?i.map(function(e,a){for(var r=t+e;r.length<54;)r+=" ";return r+n[a]}).join("\n"):"<>"},r=function(e){return function(t,a){var n=t.pop();return n?n.length===e&&(t.push(n),n=[]):n=[],n.push(a),t.push(n),t}};a.default=n,t.exports=a.default},{}],16:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("../../bit-streams/h264"),r=void 0,i=void 0,s=void 0,o=function(e,t){var a={};return e&&Object.keys(e).forEach(function(t){a[t]=e[t]}),t&&Object.keys(t).forEach(function(e){a[e]=t[e]}),a};a.mergePS=o;var u=function(e){var t,a,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=[];for(t=0;t+4<e.length;t+=a)if(a=n.getUint32(t),t+=4,a<=0)r.push({type:"MALFORMED-DATA"});else{if(a>e.length)return void r.push({type:"UNKNOWN MDAT DATA"});var i=e.subarray(t,t+a);r.push(l(i))}return r};a.nalParseAVCC=u;var _=function(e){for(var t=0,a=void 0,n=[];t<e.byteLength-3;t++)if(0===e[t]&&0===e[t+1]&&1===e[t+2]){a=t+5;break}for(;a<e.byteLength;)switch(e[a]){case 0:if(0!==e[a-1]){a+=2;break}if(0!==e[a-2]){a++;break}t+3!==a-2&&n.push(l(e.subarray(t+3,a-2)));do a++;while(1!==e[a]&&a<e.length);t=a-2,a+=3;break;case 1:if(0!==e[a-1]||0!==e[a-2]){a+=3;break}n.push(l(e.subarray(t+3,a-2))),t=a-2,a+=3;break;default:a+=3}return e=e.subarray(t),a-=t,t=0,e&&e.byteLength>3&&n.push(l(e.subarray(t+3))),n};a.nalParseAnnexB=_;var l=function(e){var t=void 0;t=e.length>1?(0,n.discardEmulationPrevention)(e.subarray(1)):e;var a=31&e[0],u=(96&e[0])>>>5;s&&(s.nal_unit_type=a,s.nal_ref_idc=u);var _=void 0,l=void 0;switch(a){case 1:return _=n.sliceLayerWithoutPartitioning.decode(t,s),_.type="slice_layer_without_partitioning_rbsp",_.nal_ref_idc=u,_.size=t.length,_;case 2:return{type:"slice_data_partition_a_layer_rbsp",size:t.length};case 3:return{type:"slice_data_partition_b_layer_rbsp",size:t.length};case 4:return{type:"slice_data_partition_c_layer_rbsp",size:t.length};case 5:return l=o(s,{idrPicFlag:1}),_=n.sliceLayerWithoutPartitioning.decode(t,l),_.type="slice_layer_without_partitioning_rbsp_idr",_.nal_ref_idc=u,_.size=t.length,_;case 6:return _=n.supplementalEnhancementInformation.decode(t,s),_.type="sei_message_rbsp",_.size=t.length,_;case 7:return r=n.seqParameterSet.decode(t),s=o(i,r),r.type="seq_parameter_set_rbsp",r.size=t.length,r;case 8:return i=n.picParameterSet.decode(t),s=o(i,r),i.type="pic_parameter_set_rbsp",i.size=t.length,i;case 9:return _=n.accessUnitDelimiter.decode(t),_.type="access_unit_delimiter_rbsp",_.size=t.length,_;case 10:return{type:"end_of_seq_rbsp",size:t.length};case 11:return{type:"end_of_stream_rbsp",size:t.length};case 12:return{type:"filler_data_rbsp",size:t.length};case 13:return{type:"seq_parameter_set_extension_rbsp",size:t.length};case 14:return{type:"prefix_nal_unit_rbsp",size:t.length};case 15:return{type:"subset_seq_parameter_set_rbsp",size:t.length};case 16:return{type:"depth_parameter_set_rbsp",size:t.length};case 19:return{type:"slice_layer_without_partitioning_rbsp_aux",size:t.length};case 20:case 21:return{type:"slice_layer_extension_rbsp",size:t.length};default:return{type:"INVALID NAL-UNIT-TYPE - "+a,size:t.length}}}},{"../../bit-streams/h264":6}],17:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("./common/nal-parse"),i=e("./common/data-to-hex.js"),s=n(i),o={8:"audio",9:"video",18:"metadata"},u=function(e,t){var a=["AVC Sequence Header","AVC NALU","AVC End-of-Sequence"],n=e[1]&parseInt("01111111",2)<<16|e[2]<<8|e[3];return t=t||{},t.avcPacketType=a[e[0]],t.CompositionTime=e[1]&parseInt("10000000",2)?-n:n,t.data=e.subarray(4),0===e[0]&&(t.type="video-metadata"),t},_=function(e,t){var a=["Unknown","Keyframe (for AVC, a seekable frame)","Inter frame (for AVC, a nonseekable frame)","Disposable inter frame (H.263 only)","Generated keyframe (reserved for server use only)","Video info/command frame"],n=e[0]&parseInt("00001111",2);return t=t||{},t.frameType=a[(e[0]&parseInt("11110000",2))>>>4],t.codecID=n,7===n?u(e.subarray(1),t):t},l=function(e,t){var a=["AAC Sequence Header","AAC Raw"];return t=t||{},t.aacPacketType=a[e[0]],t.data=e.subarray(1),t},c=function(e,t){var a=["Linear PCM, platform endian","ADPCM","MP3","Linear PCM, little endian","Nellymoser 16-kHz mono","Nellymoser 8-kHz mono","Nellymoser","G.711 A-law logarithmic PCM","G.711 mu-law logarithmic PCM","reserved","AAC","Speex","MP3 8-Khz","Device-specific sound"],n=["5.5-kHz","11-kHz","22-kHz","44-kHz"],r=(e[0]&parseInt("11110000",2))>>>4;return t=t||{},t.soundFormat=a[r],t.soundRate=n[(e[0]&parseInt("00001100",2))>>>2],t.soundSize=(e[0]&parseInt("00000010",2))>>>1?"16-bit":"8-bit",t.soundType=e[0]&parseInt("00000001",2)?"Stereo":"Mono",10===r?l(e.subarray(1),t):t},d=function(e){return{type:o[e[0]],dataSize:e[1]<<16|e[2]<<8|e[3],timestamp:e[7]<<24|e[4]<<16|e[5]<<8|e[6],streamID:e[8]<<16|e[9]<<8|e[10]}},f=function(e){var t=d(e);switch(e[0]){case 8:c(e.subarray(11),t);break;case 9:_(e.subarray(11),t);break;case 18:}return t},p=function(e){var t,a,n=9,r=[];for(n+=4;n<e.byteLength;)t=e[n+1]<<16,t|=e[n+2]<<8,t|=e[n+3],t+=11,a=e.subarray(n,n+t),r.push(f(a)),n+=t+4;return r},m=function(e){var t=document.createElement("div");return g(e,t,1),t},g=function(e,t,a){e.forEach(function(e){document.createElement("div");b(h(e),t,a+1)})},h=function(e){return"video"===e.type&&(e.nals=(0,r.nalParseAVCC)(e.data),e.nals.size=e.data.length),e},b=function e(t,a,n){var r=function(e){return"[object Object]"===Object.prototype.toString.call(e)},i=["size","flags","type","version"],s=["boxes","nals","samples","packetCount"],o=Object.keys(t).filter(function(e){return r(t[e])||Array.isArray(t[e])&&r(t[e][0])}),u=i.concat(s).concat(o),_=Object.keys(t).filter(function(e){return u.indexOf(e)===-1}),l=document.createElement("mp4-box"),c=document.createElement("mp4-properties"),d=document.createElement("mp4-boxes"),f=document.createElement("mp4-box-type");t.type&&(f.textContent=t.type,n>1&&f.classList.add("collapsed"),l.appendChild(f)),i.forEach(function(e){"undefined"!=typeof t[e]&&l.setAttribute("data-"+e,t[e])}),_.length&&(_.forEach(function(e){y(e,t[e],c)}),l.appendChild(c)),t.boxes&&t.boxes.length?(t.boxes.forEach(function(t){return e(t,d,n+1)}),l.appendChild(d)):o.length&&(o.forEach(function(a){Array.isArray(t[a])?e({type:a,boxes:t[a],size:t[a].size},d,n+1):e(t[a],d,n+1)}),l.appendChild(d)),a.appendChild(l)},y=function(e,t,a){var n=document.createElement("mp4-name"),r=document.createElement("mp4-value"),i=document.createElement("mp4-property");if(n.setAttribute("data-name",e),n.textContent=e,t instanceof Uint8Array||t instanceof Uint32Array){for(var o=(0,s.default)(t,""),u=0,_=0;u<o.length;u++)if("\n"===o[u]&&21===++_){u++;break}var l=o.slice(0,u);l.length<o.length&&(l+="<"+(t.byteLength-336)+"b remaining of "+t.byteLength+"b total>"),r.setAttribute("data-value",l.toUpperCase()),r.innerHTML=l,r.classList.add("pre-like")}else if(Array.isArray(t)){var o="["+t.join(", ")+"]";r.setAttribute("data-value",o),r.textContent=o}else r.setAttribute("data-value",t),r.textContent=t;i.appendChild(n),i.appendChild(r),a.appendChild(i)};a.default={inspect:p,domify:m},t.exports=a.default},{"./common/data-to-hex.js":15,"./common/nal-parse":16}],18:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("./mp4"),i=n(r),s=e("./ts"),o=n(s),u=e("./flv"),_=n(u);a.default={mp4Inspector:i.default,tsInspector:o.default,flvInspector:_.default},t.exports=a.default},{"./flv":17,"./mp4":19,"./ts":20}],19:[function(e,t,a){(function(n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var i=e("../bit-streams/h264"),s=e("./common/nal-parse"),o=e("./common/data-to-hex.js"),u=r(o),_=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},l=function(e){return new Date(1e3*e-20828448e5)},c=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},d=void 0,f=void 0,p=void 0,m={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:g(e.subarray(78,e.byteLength))}},avcC:function(e){var t,a,n,r,o=new DataView(e.buffer,e.byteOffset,e.byteLength),u={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},_=31&e[5];for(n=6,r=0;r<_;r++){a=o.getUint16(n),n+=2;var l=(0,i.discardEmulationPrevention)(new Uint8Array(e.subarray(n+1,n+a)));d=i.seqParameterSet.decode(l),p=(0,s.mergePS)(f,d),u.sps.push(d),n+=a}for(t=e[n],n++,r=0;r<t;r++){a=o.getUint16(n),n+=2;var l=(0,i.discardEmulationPrevention)(new Uint8Array(e.subarray(n+1,n+a)));f=i.picParameterSet.decode(l),p=(0,s.mergePS)(f,d),u.pps.push(f),n+=a}return u},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a={majorBrand:_(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},n=8;n<e.byteLength;)a.compatibleBrands.push(_(e.subarray(n,n+4))),n+=4;return a},dinf:function(e){return{boxes:g(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:g(e.subarray(8))}},hdlr:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:_(e.subarray(8,12)),name:""},r=8;for(r=24;r<e.byteLength;r++){if(0===e[r]){r++;break}a.name+=String.fromCharCode(e[r])}return a.name=decodeURIComponent(n.escape(a.name)),a},mdat:function(e){return{byteLength:e.byteLength,nals:(0,s.nalParseAVCC)(e),size:e.byteLength}},mdhd:function(e){var t,a=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r={version:a.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===r.version?(n+=4,r.creationTime=l(a.getUint32(n)),n+=8,r.modificationTime=l(a.getUint32(n)),n+=4,r.timescale=a.getUint32(n),n+=8,r.duration=a.getUint32(n)):(r.creationTime=l(a.getUint32(n)),n+=4,r.modificationTime=l(a.getUint32(n)),n+=4,r.timescale=a.getUint32(n),n+=4,r.duration=a.getUint32(n)),n+=4,t=a.getUint16(n),r.language+=String.fromCharCode((t>>10)+96),r.language+=String.fromCharCode(((960&t)>>5)+96),r.language+=String.fromCharCode((31&t)+96),r},mdia:function(e){return{boxes:g(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:g(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return e.byteLength>28&&(a.streamDescriptor=g(e.subarray(28))[0]),a},moof:function(e){return{boxes:g(e)}},moov:function(e){return{boxes:g(e)}},mvex:function(e){return{boxes:g(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(a+=4,n.creationTime=l(t.getUint32(a)),a+=8,n.modificationTime=l(t.getUint32(a)),a+=4,n.timescale=t.getUint32(a),a+=8,n.duration=t.getUint32(a)):(n.creationTime=l(t.getUint32(a)),a+=4,n.modificationTime=l(t.getUint32(a)),a+=4,n.timescale=t.getUint32(a),a+=4,n.duration=t.getUint32(a)),a+=4,n.rate=t.getUint16(a)+t.getUint16(a+2)/16,a+=4,n.volume=t.getUint8(a)+t.getUint8(a+1)/8,a+=2,a+=2,a+=8,n.matrix=new Uint32Array(e.subarray(a,a+36)),a+=36,a+=24,n.nextTrackId=t.getUint32(a),n},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,a={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)a.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return a},sidx:function(e){var t,a=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:a.getUint32(4),timescale:a.getUint32(8),earliestPresentationTime:a.getUint32(12),firstOffset:a.getUint32(16)},r=a.getUint16(22);for(t=24;r;t+=12,r--)n.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&a.getUint32(t),subsegmentDuration:a.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&a.getUint32(t+8)});return n},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:g(e)}},stco:function(e){var t,a=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},r=a.getUint32(4);for(t=8;r;t+=4,r--)n.chunkOffsets.push(a.getUint32(t));return n},stsc:function(e){var t,a=new DataView(e.buffer,e.byteOffset,e.byteLength),n=a.getUint32(4),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;n;t+=12,n--)r.sampleToChunks.push({firstChunk:a.getUint32(t),samplesPerChunk:a.getUint32(t+4),sampleDescriptionIndex:a.getUint32(t+8)});return r},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:g(e.subarray(8))}},stsz:function(e){var t,a=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:a.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)n.entries.push(a.getUint32(t));return n},stts:function(e){var t,a=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},r=a.getUint32(4);for(t=8;r;t+=8,r--)n.timeToSamples.push({sampleCount:a.getUint32(t),sampleDelta:a.getUint32(t+4)});return n},styp:function(e){return m.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),t},tfhd:function(e){var t,a=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:a.getUint32(4)},r=1&n.flags[2],i=2&n.flags[2],s=8&n.flags[2],o=16&n.flags[2],u=32&n.flags[2];return t=8,r&&(t+=4,n.baseDataOffset=a.getUint32(12),t+=4),i&&(n.sampleDescriptionIndex=a.getUint32(t),t+=4),s&&(n.defaultSampleDuration=a.getUint32(t),t+=4),o&&(n.defaultSampleSize=a.getUint32(t),t+=4),u&&(n.defaultSampleFlags=a.getUint32(t)),n},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(a+=4,n.creationTime=l(t.getUint32(a)),a+=8,n.modificationTime=l(t.getUint32(a)),a+=4,n.trackId=t.getUint32(a),a+=4,a+=8,n.duration=t.getUint32(a)):(n.creationTime=l(t.getUint32(a)),a+=4,n.modificationTime=l(t.getUint32(a)),a+=4,n.trackId=t.getUint32(a),a+=4,a+=4,n.duration=t.getUint32(a)),a+=4,a+=8,n.layer=t.getUint16(a),a+=2,n.alternateGroup=t.getUint16(a),a+=2,n.volume=t.getUint8(a)+t.getUint8(a+1)/8,a+=2,a+=2,n.matrix=new Uint32Array(e.subarray(a,a+36)),a+=36,n.width=t.getUint16(a)+t.getUint16(a+2)/16,a+=4,n.height=t.getUint16(a)+t.getUint16(a+2)/16,n},traf:function(e){return{boxes:g(e)}},trak:function(e){return{boxes:g(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,a={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&a.flags[2],i=4&a.flags[2],s=1&a.flags[1],o=2&a.flags[1],u=4&a.flags[1],_=8&a.flags[1],l=n.getUint32(4),d=8;for(r&&(a.dataOffset=n.getUint32(d),d+=4),i&&l&&(t={flags:c(e.subarray(d,d+4))},d+=4,s&&(t.duration=n.getUint32(d),d+=4),o&&(t.size=n.getUint32(d),d+=4),_&&(t.compositionTimeOffset=n.getUint32(d),d+=4),a.samples.push(t),l--);l--;)t={},s&&(t.duration=n.getUint32(d),d+=4),o&&(t.size=n.getUint32(d),d+=4),u&&(t.flags=c(e.subarray(d,d+4)),d+=4),_&&(t.compositionTimeOffset=n.getUint32(d),d+=4),a.samples.push(t);return a},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}},g=function(e){for(var t,a,n,r,i,s=0,o=[],u=!1,l=null,c=new ArrayBuffer(e.length),d=new Uint8Array(c),f=0;f<e.length;++f)d[f]=e[f];for(t=new DataView(c);s<e.byteLength;)a=t.getUint32(s),n=_(e.subarray(s+4,s+8)),r=a>1?s+a:e.byteLength,"moov"===n&&(u=!0),"mdat"!==n||u?(i=(m[n]||function(e){return{data:e}})(e.subarray(s+8,r)),i.size=a,i.type=n,o.push(i)):l=e.subarray(s+8,r),l&&u&&(i=m.mdat(l),i.size=l.byteLength,i.type="mdat",o.push(i),l=null),s=r;return o},h=function e(t,a){var n;return a=a||0,n=new Array(2*a+1).join(" "),t.map(function(t,r){return n+t.type+"\n"+Object.keys(t).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(e){var a=n+"  "+e+": ",r=t[e];return r instanceof Uint8Array||r instanceof Uint32Array?a+(0,u.default)(r,n):a+JSON.stringify(r,null,2).split("\n").map(function(e,t){return 0===t?e:n+"  "+e}).join("\n")}).join("\n")+(t.boxes?"\n"+e(t.boxes,a+1):"")}).join("\n")},b=function(e){var t={type:"mp4",boxes:e,size:e.reduce(function(e,t){return e+t.size},0)},a=document.createElement("div");return y(t,a,1),a},y=function e(t,a,n){var r=function(e){return"[object Object]"===Object.prototype.toString.call(e)},i=["size","flags","type","version"],s=["boxes","nals","samples"],o=Object.keys(t).filter(function(e){return r(t[e])||Array.isArray(t[e])&&r(t[e][0])}),u=i.concat(s).concat(o),_=Object.keys(t).filter(function(e){return u.indexOf(e)===-1}),l=document.createElement("mp4-box"),c=document.createElement("mp4-properties"),d=document.createElement("mp4-boxes"),f=document.createElement("mp4-box-type");t.type&&(f.textContent=t.type,n>1&&f.classList.add("collapsed"),l.appendChild(f)),i.forEach(function(e){"undefined"!=typeof t[e]&&l.setAttribute("data-"+e,t[e])}),_.length&&(_.forEach(function(e){v(e,t[e],c)}),l.appendChild(c)),t.boxes&&t.boxes.length?(t.boxes.forEach(function(t){return e(t,d,n+1)}),l.appendChild(d)):o.length&&(o.forEach(function(a){Array.isArray(t[a])?e({type:a,boxes:t[a],size:t[a].size},d,n+1):e(t[a],d,n+1)}),l.appendChild(d)),a.appendChild(l)},v=function(e,t,a){var n=document.createElement("mp4-name"),r=document.createElement("mp4-value"),i=document.createElement("mp4-property");if(n.setAttribute("data-name",e),n.textContent=e,t instanceof Uint8Array||t instanceof Uint32Array){for(var s=(0,u.default)(t,""),o=0,_=0;o<s.length;o++)if("\n"===s[o]&&21===++_){o++;break}var l=s.slice(0,o);l.length<s.length&&(l+="<"+(t.byteLength-336)+"b remaining of "+t.byteLength+"b total>"),r.setAttribute("data-value",l.toUpperCase()),r.innerHTML=l,r.classList.add("pre-like")}else if(Array.isArray(t)){var s="["+t.join(", ")+"]";r.setAttribute("data-value",s),r.textContent=s}else r.setAttribute("data-value",t),r.textContent=t;i.appendChild(n),i.appendChild(r),a.appendChild(i)};a.default={inspect:g,textify:h,domify:b},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../bit-streams/h264":6,"./common/data-to-hex.js":15,"./common/nal-parse":16}],20:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("./common/nal-parse"),i=e("./common/aac-parse"),s=e("./common/data-to-hex.js"),o=n(s),u=188,_=71,l={h264:27,adts:15,metadata:21},c=function(e){for(var t=0,a=u,n=-1,r=[];a<e.byteLength;)e[t]!==_||e[a]!==_?(n=t,t++,a++):(n!==-1&&(r.push({type:"unknown-bytes",data:e.subarray(n,t)}),n=-1),r.push({type:"transportstream-packet",data:e.subarray(t,a)}),t+=u,a+=u);return t+u===e.byteLength&&(r.push({type:"transportstream-packet",data:e.subarray(t,a)}),t+=u,a+=u),t<e.byteLength&&r.push({type:"unknown-bytes",data:e.subarray(t)}),d(r)},d=function(e){var t=[],a=[],n=null,r=null,i=function(e){e.pid===r?(e.content.type="pmt",o(e)):null===n?t.push(e):s(e)},s=function(e){var t=n[e.pid];t?e.content.streamType=t.streamType:e.content.streamType=" unknown",e.content.type="pes"},o=function(e){var t=0,a=e.content,n=a.data;e.payloadUnitStartIndicator&&(t+=n[0]+1),a.data=n.subarray(t),"pat"===a.type?u(e):_(e)},u=function(e){var t=e.content,n=t.data;for(t.sectionNumber=n[7],t.lastSectionNumber=n[8],r=(31&n[10])<<8|n[11],t.pmtPid=r;a.length;)i(a.shift())},_=function(e){var a,r,i,o,u=e.content,_=u.data;if(1&_[5]){for(n={},a=(15&_[1])<<8|_[2],r=3+a-4,i=(15&_[10])<<8|_[11],o=12+i;o<r;){var l=(15&_[o+3])<<8|_[o+4];n[(31&_[o+1])<<8|_[o+2]]={streamType:_[o],esInfo:_.subarray(o+5,o+5+l)},o+=l+5}for(u.programMapTable=n;t.length;)s(t.shift())}},l=function(e){var t=4,n=e.data,s={};return e.payloadUnitStartIndicator=!!(64&n[1]),e.pid=31&n[1],e.pid<<=8,e.pid|=n[2],e.content=s,(48&n[3])>>>4>1&&(t+=n[t]+1),s.data=n.subarray(t),0===e.pid?(s.type="pat",o(e),e):null===r?(a.push(e),e):i(e)};return e.forEach(function(e){"transportstream-packet"===e.type?l(e):e.content={}}),e},f=function(e){var t=[],a=[],n=function(e,t){var a;t.dataAlignmentIndicator=0!==(4&e[6]),a=e[7],192&a&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&a&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8])},r=function(e){var a,r=new Uint8Array(e.size),i={type:e.streamType},s=0;if(e.data.length){for(i.pid=e.pid,i.packetCount=e.data.length,i.tsPacketIndices=e.tsPacketIndices;e.data.length;)a=e.data.shift(),r.set(a.data,s),s+=a.data.byteLength;n(r,i),e.size=0,e.tsPacketIndices=[],t.push(i)}},i={pat:function e(a,n){var e=a.content;t.push({pid:a.pid,type:"pat",packetCount:1,sectionNumber:e.sectionNumber,lastSectionNumber:e.lastSectionNumber,tsPacketIndices:[n],pmtPid:e.pmtPid,data:e.data})},pes:function e(t,n){var i=void 0,e=t.content;if(!a[t.pid])switch(i=a[t.pid]={data:[],tsPacketIndices:[],size:0},e.streamType){case l.h264:i.streamType="video";break;case l.adts:i.streamType="audio";break;case l.metadata:i.streamType="timed-metadata";break;default:i.streamType="unknown-"+t.pid}i=a[t.pid],t.payloadUnitStartIndicator&&r(i),i.pid=t.pid,i.tsPacketIndices.push(n),i.data.push(e),i.size+=e.data.byteLength},pmt:function e(a,n){var e=a.content,r=e.programMapTable,i={pid:a.pid,type:"pmt",tracks:[],tsPacketIndices:[n],packetCount:1,data:e.data},s=void 0,o=void 0;for(s in r)r.hasOwnProperty(s)&&(o={},o.id=+s,o.streamType=r[s].streamType,r[s].streamType===l.h264?(o.codec="avc",o.type="video"):r[s].streamType===l.adts?(o.codec="adts",o.type="audio"):r[s].streamType===l.metadata?o.type="metadata":o.type="unknown",o.esInfo=r[s].esInfo,i.tracks.push(o));t.push(i)}},s=function(e,t){switch(e.content.type){case"pat":case"pmt":case"pes":i[e.content.type](e,t)}};return e.forEach(function(e,t){s(e,t)}),a.forEach(function(e){r(e)}),t},p=function(e){var t={},a=c(e),n=f(a);return t.tsMap=a,t.esMap=n,t},m=function(e){var t=(e.tsMap,e.esMap),a=document.createElement("div");return g(t,a,1),a},g=function(e,t,a){e.forEach(function(e){document.createElement("div");"video"===e.type?y(h(e),t,a+1):"audio"===e.type?y(b(e),t,a+1):y(e,t,a+1)})},h=function(e){return e.nals=(0,r.nalParseAnnexB)(e.data),e.nals.size=e.data.length,e},b=function(e){return e.adts=(0,i.parseAdts)(e),e.adts.ize=e.data.length,e},y=function e(t,a,n){var r=function(e){return"[object Object]"===Object.prototype.toString.call(e)},i=["size","flags","type","version"],s=["boxes","nals","samples","packetCount"],o=Object.keys(t).filter(function(e){return r(t[e])||Array.isArray(t[e])&&r(t[e][0])}),u=i.concat(s).concat(o),_=Object.keys(t).filter(function(e){return u.indexOf(e)===-1}),l=document.createElement("mp4-box"),c=document.createElement("mp4-properties"),d=document.createElement("mp4-boxes"),f=document.createElement("mp4-box-type");t.type&&(f.textContent=t.type,n>1&&f.classList.add("collapsed"),l.appendChild(f)),i.forEach(function(e){"undefined"!=typeof t[e]&&l.setAttribute("data-"+e,t[e])}),_.length&&(_.forEach(function(e){v(e,t[e],c)}),l.appendChild(c)),t.boxes&&t.boxes.length?(t.boxes.forEach(function(t){return e(t,d,n+1)}),l.appendChild(d)):o.length&&(o.forEach(function(a){Array.isArray(t[a])?e({type:a,boxes:t[a],size:t[a].size},d,n+1):e(t[a],d,n+1)}),l.appendChild(d)),a.appendChild(l)},v=function(e,t,a){var n=document.createElement("mp4-name"),r=document.createElement("mp4-value"),i=document.createElement("mp4-property");if(n.setAttribute("data-name",e),n.textContent=e,t instanceof Uint8Array||t instanceof Uint32Array){for(var s=(0,o.default)(t,""),u=0,_=0;u<s.length;u++)if("\n"===s[u]&&21===++_){u++;break}var l=s.slice(0,u);l.length<s.length&&(l+="<"+(t.byteLength-336)+"b remaining of "+t.byteLength+"b total>"),r.setAttribute("data-value",l.toUpperCase()),r.innerHTML=l,r.classList.add("pre-like")}else if(Array.isArray(t)){var s="["+t.join(", ")+"]";r.setAttribute("data-value",s),r.textContent=s}else r.setAttribute("data-value",t),r.textContent=t;i.appendChild(n),i.appendChild(r),a.appendChild(i)};a.default={inspect:p,domify:m},t.exports=a.default},{"./common/aac-parse":14,"./common/data-to-hex.js":15,"./common/nal-parse":16}],21:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("./exp-golomb-string"),r=e("./rbsp-utils"),i=(e("./merge-obj"),function(e,t){return{decode:function(e,a,i){var s=(0,r.typedArrayToBitString)(e),o=s;a=a||{},i=i||{},a.no_trailer_bits||(o=(0,r.removeRBSPTrailingBits)(s));var u=new n.ExpGolombDecoder(o);try{return t.decode(u,i,a)}catch(e){return e}},encode:function(e,a){var i=new n.ExpGolombEncoder;a=a||{},t.encode(i,e,a);var s=i.bitReservoir,o=(0,r.appendRBSPTrailingBits)(s),u=(0,r.bitStringToTypedArray)(o);return u}}});a.start=i;var s=function(e,t){var a=i(e,t);return{decode:function(e,t){return a.decode(e,t,[])},encode:a.encode}};a.startArray=s;var o=function(e){return{decode:function(t,a,n,r){return e.forEach(function(e){a=e.decode(t,a,n,r)||a}),a},encode:function(t,a,n,r){e.forEach(function(e){e.encode(t,a,n,r)})}}};a.list=o;var u=function(e,t){var a=e.split(/\[(\d*)\]/),n=a[0],r=void 0,i=void 0;if(!a||""===a[0])throw new Error('ExpGolombError: Invalid name "'+e+'".');
return a.length>1&&(i=!0,r=parseFloat(a[1]),isNaN(r)&&(r=void 0)),{name:e,decode:function(e,a,s,o){var u=void 0;return"number"==typeof r&&(o=r),u=t.read(e,a,s,o),i?(Array.isArray(a[n])||(a[n]=[]),void 0!==o?a[n][o]=u:a[n].push(u)):a[n]=u,a},encode:function(e,a,s,o){var u=void 0;"number"==typeof r&&(o=r),i?Array.isArray(a[n])&&(u=void 0!==o?a[n][o]:a[n].shift()):u=a[n],"number"==typeof u&&(u=t.write(e,a,s,o,u))}}};a.data=u;var _=function(e){return{decode:function(t,a,n,r){console.log(e,t.bitReservoir,a,n,r)},encode:function(t,a,n,r){console.log(e,t.bitReservoir,a,n,r)}}};a.debug=_;var l=function(e,t){var a=e.split(/\[(\d*)\]/),n=a[0],r=void 0,i=void 0;if(!a||""===a[0])throw new Error('ExpGolombError: Invalid name "'+e+'".');return a.length>1&&(i=!0,r=parseFloat(a[1]),isNaN(r)&&(r=void 0)),{name:e,decode:function(e,a,s,o){var u=void 0;return"number"==typeof r&&(o=r),u=t.decode(e,Object.create(a),s,o),i?(Array.isArray(a[n])||(a[n]=[]),void 0!==o?a[n][o]=u:a[n].push(u)):a[n]=u,a},encode:function(e,a,s,o){var u=void 0;"number"==typeof r&&(o=r),i?Array.isArray(a[n])&&(u=void 0!==o?a[n][o]:a[n].shift()):u=a[n],"number"==typeof u&&t.encode(e,u,s,o)}}};a.newObj=l;var c=function(e){return{decode:function(t,a,n,r){var i=t.bitReservoir.length;0!==i&&(console.trace("ERROR: "+e+" was not completely parsed. There were ("+i+") bits remaining!"),console.log(t.originalBitReservoir))},encode:function(e,t,a,n){}}};a.verify=c;var d=function(e,t){return{decode:function(t,a,n,r){void 0!==typeof n[e]},encode:function(t,a,n,r){void 0!==typeof n[e]}}};a.pickOptions=d},{"./exp-golomb-string":25,"./merge-obj":26,"./rbsp-utils":27}],22:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e,t){return{decode:function(a,n,r,i){return e(n,r,i)?t.decode(a,n,r,i):n},encode:function(a,n,r,i){e(n,r,i)&&t.encode(a,n,r,i)}}};a.when=n;var r=function(e,t){return{decode:function(a,n,r){for(var i=0;e(i,n,r);)t.decode(a,n,r,i),i++;return n},encode:function(a,n,r){for(var i=0;e(i,n,r);)t.encode(a,n,r,i),i++}}};a.each=r;var i=function(e,t){var a=e.split(/\[(\d*)\]/),n=a[0],r=void 0,i=void 0;if(!a||""===a[0])throw new Error('ExpGolombError: Invalid name "'+e+'".');return a.length>1&&(i=!0,r=parseFloat(a[1]),isNaN(r)&&(r=void 0)),function(e,a,r){return i?e[n]&&t.indexOf(e[n][r])!==-1||a[n]&&t.indexOf(a[n][r])!==-1:t.indexOf(e[n])!==-1||t.indexOf(a[n])!==-1}};a.inArray=i;var s=function(e,t){var a=e.split(/\[(\d*)\]/),n=a[0],r=void 0,i=void 0;if(!a||""===a[0])throw new Error('ExpGolombError: Invalid name "'+e+'".');return a.length>1&&(i=!0,r=parseFloat(a[1]),isNaN(r)&&(r=void 0)),function(e,a,r){return i?e[n]&&e[n][r]===t||a[n]&&a[n][r]===t:e[n]===t||a[n]===t}};a.equals=s;var o=function(e,t){var a=e.split(/\[(\d*)\]/),n=a[0],r=void 0,i=void 0;if(!a||""===a[0])throw new Error('ExpGolombError: Invalid name "'+e+'".');return a.length>1&&(i=!0,r=parseFloat(a[1]),isNaN(r)&&(r=void 0)),function(e,a,r){return i?e[n]&&e[n][r]>t||a[n]&&a[n][r]>t:e[n]>t||a[n]>t}};a.gt=o;var u=function(e){return function(t,a,n){return!e(t,a,n)}};a.not=u;var _=function(e){return function(t,a,n){return e.some(function(e){return e(t,a,n)})}};a.some=_;var l=function(e){return function(t,a,n){return e.every(function(e){return e(t,a,n)})}};a.every=l;var c=function(e){return{decode:function(t,a,n,r){return t.bitReservoir.length?e.decode(t,a,n,r):a},encode:function(t,a,n,r){e.encode(t,a,n,r)}}};a.whenMoreData=c;var d=function(e){return{decode:function(t,a,n){for(var r=0;t.bitReservoir.length;)e.decode(t,a,n,r),r++;return a},encode:function(t,a,n){var r=0,i=0;for(Array.isArray(a)&&(i=a.length);r<i;)e.encode(t,a,n,r),r++}}};a.whileMoreData=d},{}],23:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e,t,a,n,r){return"function"==typeof e?e(t,a,n,r):e},r={u:function(e){return{read:function(t,a,r,i){var s=n(e,t,a,r,i);return t.readBits(s)},write:function(t,a,r,i,s){var o=n(e,t,a,r,i);t.writeBits(o,s)}}},f:function(e){return{read:function(t,a,r,i){var s=n(e,t,a,r,i);return t.readBits(s)},write:function(t,a,r,i,s){var o=n(e,t,a,r,i);t.writeBits(o,s)}}},ue:function(){return{read:function(e,t,a,n){return e.readUnsignedExpGolomb()},write:function(e,t,a,n,r){e.writeUnsignedExpGolomb(r)}}},se:function(){return{read:function(e,t,a,n){return e.readExpGolomb()},write:function(e,t,a,n,r){e.writeExpGolomb(r)}}},b:function(){return{read:function(e,t,a,n){return e.readUnsignedByte()},write:function(e,t,a,n,r){e.writeUnsignedByte(r)}}},val:function(e){return{read:function(t,a,n,r){return"function"==typeof e?e(t,a,n,r):e},write:function(t,a,n,r,i){"function"==typeof e&&e(ExpGolomb,output,n,r)}}},byteAlign:function(){return{read:function(e,t,a,n){return e.byteAlign()},write:function(e,t,a,n,r){}}}};a.default=r,t.exports=a.default},{}],24:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e){for(var t=e.length,a=[],n=1,r=void 0,i=void 0;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(a.push(n+2),n+=2):n++;if(0===a.length)return e;r=t-a.length,i=new Uint8Array(r);var s=0;for(n=0;n<r;s++,n++)s===a[0]&&(s++,a.shift()),i[n]=e[s];return i};a.default=n,t.exports=a.default},{}],25:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e){this.bitReservoir=e,this.originalBitReservoir=e};a.ExpGolombDecoder=n,n.prototype.byteAlign=function(){var e=8*Math.ceil((this.originalBitReservoir.length-this.bitReservoir.length)/8),t=this.originalBitReservoir.length-e,a=this.bitReservoir.length-t;return this.readRawBits(a)},n.prototype.countLeadingZeros=function(){for(var e=0;e<this.bitReservoir.length;e++)if("1"===this.bitReservoir[e])return e;return-1},n.prototype.readUnsignedExpGolomb=function(){var e=this.countLeadingZeros(),t=2*e+1;if(e===-1)throw new Error("Error reading exp-golomb value.");var a=parseInt(this.bitReservoir.slice(e,t),2);return a-=1,this.bitReservoir=this.bitReservoir.slice(t),a},n.prototype.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 0!==e&&(e=1&e?(e+1)/2:-(e/2)),e},n.prototype.readBits=function(e){if(this.bitReservoir.length<e)throw new Error("Error reading bit stream value. There were ("+this.bitReservoir.length+") bits remaining but expected ("+e+").");var t=parseInt(this.bitReservoir.slice(0,e),2);return this.bitReservoir=this.bitReservoir.slice(e),t},n.prototype.readRawBits=function(e){if(this.bitReservoir.length<e)throw new Error("Error reading bit stream value. There were ("+this.bitReservoir.length+") bits remaining but expected ("+e+").");var t=this.bitReservoir.slice(0,e);return this.bitReservoir=this.bitReservoir.slice(e),t},n.prototype.readUnsignedByte=function(){return this.readBits(8)};var r=function(e){this.bitReservoir=e||""};a.ExpGolombEncoder=r,r.prototype.writeUnsignedExpGolomb=function(e){for(var t="",a=(e+1).toString(2),n=a.length-1,r=0;r<n;r++)t+="0";this.bitReservoir+=t+a},r.prototype.writeExpGolomb=function(e){e=e<=0?2*-e:2*e-1,this.writeUnsignedExpGolomb(e)},r.prototype.writeBits=function(e,t){for(var a="",n=(t&(1<<e)-1).toString(2),r=e-n.length,i=0;i<r;i++)a+="0";this.bitReservoir+=a+n},r.prototype.writeRawBits=function(e,t){for(var a="",n=e-t.length,r=0;r<n;r++)a+="0";this.bitReservoir+=a+t},r.prototype.writeUnsignedByte=function(e){this.writeBits(8,e)}},{}],26:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e,t){var a={};return e&&Object.keys(e).forEach(function(t){a[t]=e[t]}),t&&Object.keys(t).forEach(function(e){a[e]=t[e]}),a};a.mergeObj=n},{}],27:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e){for(var t=[],a=e.BYTES_PER_ELEMENT||1,n="",r=0;r<e.length;r++)t.push(e[r]);for(var r=0;r<a;r++)n+="00000000";return t.map(function(e){return(n+e.toString(2)).slice(8*-a)}).join("")};a.typedArrayToBitString=n;var r=function(e){for(var t=8-e.length%8,a=0;8!==t&&a<t;a++)e+="0";var n=e.match(/(.{8})/g),r=n.map(function(e){return parseInt(e,2)});return new Uint8Array(r)};a.bitStringToTypedArray=r;var i=function(e){return e.split(/10*$/)[0]};a.removeRBSPTrailingBits=i;var s=function(e){var t=e+"10000000",a=t.length%8;return 0===a?t:t.slice(0,-a)};a.appendRBSPTrailingBits=s},{}],28:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("./bit-streams/h264"),i=n(r),s=e("./inspectors"),o={h264Codecs:i.default,mp4Inspector:s.mp4Inspector,tsInspector:s.tsInspector,flvInspector:s.flvInspector};o.VERSION="1.2.1",a.default=o,t.exports=a.default},{"./bit-streams/h264":6,"./inspectors":18}]},{},[28])(28)});